var steemPrice,rewardBalance,recentClaims,currentUserAccount,votePowerReserveRate,totalVestingFund,totalVestingShares,steem_per_mvests,STEEMIT_100_PERCENT=1e4,STEEMIT_VOTE_REGENERATION_SECONDS=432e3,HOURS=36e5,steem_price=1,sbd_price=1;function getCurrency(e){return e.substr(e.indexOf(" ")+1)}function getURLParameter(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getUsdValue(e){return e.currency?parseFloat(e.amount)*("SBD"==e.currency?sbd_price:steem_price):parseFloat(e.amount)*("SBD"==getCurrency(e.amount)?sbd_price:steem_price)}function toTimer(e){var t=Math.floor(e/HOURS),a=Math.floor(e%HOURS/6e4),n=Math.floor(e%6e4/1e3);return t+":"+padLeft(a,2)+":"+padLeft(n,2)}function padLeft(e,t){var a=(e+"").length;if(t<=a)return e+"";for(var n=a;n<t;n++)e="0"+e;return e}function updateTimers(){for(var e=$(".timer"),t=0;t<e.length;t++){var a=$(e[t]);if(!a.attr("time"))return;var n=parseInt(a.attr("time"));"up"==a.attr("dir")?n+=1e3:n=Math.max(n-1e3,0),a.attr("time",n),a.text(toTimer(n))}}function updateSteemVariables(o){steem.api.getRewardFund("post",function(e,t){rewardBalance=parseFloat(t.reward_balance.replace(" STEEM","")),recentClaims=t.recent_claims,steem.api.getCurrentMedianHistoryPrice(function(e,t){steemPrice=parseFloat(t.base.replace(" SBD",""))/parseFloat(t.quote.replace(" STEEM","")),steem.api.getDynamicGlobalProperties(function(e,t){votePowerReserveRate=t.vote_power_reserve_rate,totalVestingFund=parseFloat(t.total_vesting_fund_steem.replace(" STEEM","")),totalVestingShares=parseFloat(t.total_vesting_shares.replace(" VESTS",""));var a=t.total_vesting_fund_steem.replace(" STEEM",""),n=t.total_vesting_shares.replace(" VESTS","");steem_per_mvests=a/n*1e6,o&&o()})})}),setTimeout(updateSteemVariables,6e5)}function getVotingPower(e){var t=e.voting_power,a=new Date(e.last_vote_time+"Z"),n=(new Date-a)/1e3,o=Math.round(STEEMIT_100_PERCENT*n/STEEMIT_VOTE_REGENERATION_SECONDS);return Math.min(t+o,STEEMIT_100_PERCENT)}function getVoteRShares(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){var n=Math.round(1e6*getVestingShares(t)),o=t.voting_power,r=100*e,i=new Date(t.last_vote_time+"Z"),s=(new Date-i)/1e3,l=Math.round(STEEMIT_100_PERCENT*s/STEEMIT_VOTE_REGENERATION_SECONDS),c=a||Math.min(o+l,STEEMIT_100_PERCENT),d=votePowerReserveRate*STEEMIT_VOTE_REGENERATION_SECONDS/86400,m=Math.round(c*r/STEEMIT_100_PERCENT);return m=Math.round((m+d-1)/d),Math.round(n*m/STEEMIT_100_PERCENT)}}function getVoteValue(e,t,a){if(t&&(rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate))return getVoteRShares(e,t,a)*rewardBalance/recentClaims*steemPrice}function timeTilFullPower(e){var t=getVotingPower(e);return(STEEMIT_100_PERCENT-t)*STEEMIT_VOTE_REGENERATION_SECONDS/STEEMIT_100_PERCENT}function getVestingShares(e){return parseFloat(e.vesting_shares.replace(" VESTS",""))+parseFloat(e.received_vesting_shares.replace(" VESTS",""))-parseFloat(e.delegated_vesting_shares.replace(" VESTS",""))}function popupCenter(e,t,a,n){var o=null!=window.screenLeft?window.screenLeft:screen.left,r=null!=window.screenTop?window.screenTop:screen.top,i=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-a/2+o,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+r,l=window.open(e,t,"scrollbars=yes, width="+a+", height="+n+", top="+s+", left="+i);return window.focus&&l.focus(),l}Number.prototype.formatMoney=function(e,t,a){var n=this,o=(e=isNaN(e=Math.abs(e))?2:e,t=null==t?".":t,a=null==a?",":a,n<0?"-":""),r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(e))),i=3<(i=r.length)?i%3:0;return o+(i?r.substr(0,i)+a:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")},$(document).ready(function(){$(".modal.modal-center").on("show.bs.modal",function(e){$(".modal.modal-center").each(function(){0==$(this).hasClass("in")&&$(this).show();var e=$(window).height()-60,t=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return e}}),$(this).find(".modal-body").css({"max-height":function(){return e-(t+a)}}),$(this).find(".modal-dialog").addClass("modal-dialog-center").css({"margin-top":function(){return-$(this).outerHeight()/2},"margin-left":function(){return-$(this).outerWidth()/2}}),0==$(this).hasClass("in")&&$(this).hide()})})}),$(function(){var u=1,f=.75,p=20,g="USD",l=[],c=18e5,_="https://steembottracker.net",h={},d=null,i=null,v={},b=[],E=[],x=!0;function e(t){var a=0;$.get("https://api.coinmarketcap.com/v1/ticker/steem/",function(e){steem_price=parseFloat(e[0].price_usd),$("#steem_price").text(steem_price.formatMoney()),$("#steem_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green"),2==++a&&t&&t()}),$.get("https://api.coinmarketcap.com/v1/ticker/steem-dollars/",function(e){sbd_price=parseFloat(e[0].price_usd),$("#sbd_price").text(sbd_price.formatMoney()),$("#sbd_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green"),2==++a&&t&&t()})}function t(){$.get(_+"/other_bots",function(e){e.sort(function(e,t){return t.vote_value-e.vote_value});var t=$("#other_table tbody");t.empty();for(var a=0;a<e.length;a++){var n=e[a],o=$(document.createElement("tr")),r=$('<td><a target="_blank" href="https://steemit.com/@'+n.name+'">@'+n.name+"</a></td>");o.append(r),r=$("<td>$"+n.vote_value.toFixed(2)+"</td>"),o.append(r),r=$("<td>"+(n.profile.about?n.profile.about:"")+"</td>"),o.append(r),r=$("<td>"+(n.profile.website?'<a target="_blank" href="'+n.profile.website+'">'+n.profile.website+"</a>":"")+"</td>"),o.append(r),t.append(o)}})}function a(){$.get(_+"/bid_bots",function(e){e.map(function(e){return e.name}).sort().forEach(function(e){$("#bot_list").append('<option value="'+e+'">'+e+"</option>")}),l=e,w()})}function n(){steem.api.getAccounts(["smartsteem","randowhale","minnowbooster"],function(e,t){try{var a=t[0],n=$("#smartsteem-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#smartsteem-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#ss_bot_error").css("display","none"),a=t[1];var r=JSON.parse(a.json_metadata);$("#randowhale-desc").text(r.profile.about);var i=r.config,s=$("#randowhale-status");s.text(i.sleep?"Sleeping":"Awake!"),i.sleep?(s.removeClass("label-success"),s.addClass("label-default"),$("#randowhale-submit").attr("disabled","disabled")):(s.removeClass("label-default"),s.addClass("label-success"),$("#randowhale-submit").removeAttr("disabled")),$("#randowhale-fee").text(i.fee_sbd.formatMoney()+" SBD");n=$("#randowhale-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#randowhale-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#rw_bot_error").css("display","none"),a=t[2];n=$("#minnowbooster-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#minnowbooster-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#mb_bot_error").css("display","none")}catch(e){console.log(e),$("#ss_bot_error").css("display","block")}}),$.get("https://smartsteem.com/api/general/bot_tracker",function(e){$("#smartsteem-desc").text(e.description),$("#smartsteem-profit").text(e.profit),$("#smartsteem-payment").text(e.payment),$("#smartsteem-daily").text(e.daily_limit),$("#smartsteem-weekly").text(e.weekly_limit),$("#smartsteem-features").text(e.additional_features),$("#smartsteem-howto").empty(),e.how_to.forEach(function(e){$("#smartsteem-howto").append($("<li>"+e+"</li>"))})})}function w(){$("#bots_table tbody").empty();var e=l.filter(function(e){return 0<=b.indexOf(e.name)}),t=l.filter(function(e){return b.indexOf(e.name)<0});if(e.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),t.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),0<e.length){e.forEach(o);var a=$(document.createElement("tr")),n=$(document.createElement("td"));n.attr("colspan","10"),n.html('<hr style="margin: 0;"/>'),a.append(n),$("#bots_table tbody").append(a)}t.forEach(o),$('[data-toggle="tooltip"]').tooltip(),0<E.length&&($("#bots_hidden").text(E.length),$("#unhide_link").show())}function o(t){var e=0<=b.indexOf(t.name);if(e||!(0<=E.indexOf(t.name)||t.vote_usd<p||h.verified&&!t.api_url||h.refund&&!t.refunds||h.steem&&!t.accepts_steem||h.funding&&!t.funding_url||h.nocomment&&(null==t.posts_comment||t.posts_comment))){var a=(f*t.vote_usd-u*t.total_usd)/sbd_price,n=t.accepts_steem?(f*t.vote_usd-u*t.total_usd)/steem_price:0,o=$(document.createElement("tr")),r=$(document.createElement("td"));(m=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+t.name),m.attr("target","_blank");var i="@"+t.name;if((100==t.power&&t.last>4*HOURS||t.power<90)&&(i+=" (DOWN)"),m.html("<img class='userpic' src='https://steemitimages.com/u/"+t.name+"/avatar'></img>"+i),r.append(m),t.comments){var s=$('<span class="fa fa-comment-o ml5" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows Comments"></span>');r.append(s)}if(null!=t.posts_comment&&!t.posts_comment){s=$('<img src="img/no_comment.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot does not post a comment when it votes on a post." />');r.append(s)}if(t.accepts_steem){s=$('<img src="img/steem.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot accepts STEEM bids!" />');r.append(s)}if(t.refunds){s=$('<img src="img/refund.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot automatically refunds invalid bids!" />');r.append(s)}if(t.funding_url){s=$('<a href="'+t.funding_url+'" target="_blank"><img src="img/funding.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot uses a portion of its earnings to fund other projects and initiatives - Click for Details"/></a>');r.append(s)}o.append(r),(r=$(document.createElement("td"))).text(y(t)),o.append(r),r=$(document.createElement("td"));var l=$("<span>");t.max_bid&&t.max_bid_wl&&parseFloat(t.max_bid_wl)>parseFloat(t.max_bid)&&(l.attr("data-toggle","tooltip"),l.attr("data-placement","top"),l.attr("title","This bot has a higher max bid for whitelisted accounts.")),l.html(t.min_bid.toFixed(2)+(t.max_bid?" / "+t.max_bid.toFixed(2):"")+(t.max_bid_wl?"*":"")),r.append(l),o.append(r),(r=$(document.createElement("td"))).text((t.fill_limit?(100*(1-t.fill_limit)).toFixed()+"%":"none")+" / "+(t.max_roi?t.max_roi+"%":"none")),o.append(r),(r=$(document.createElement("td"))).text((t.min_post_age?t.min_post_age:0)+" mins / "+(t.max_post_age?t.max_post_age+" days":"unknown")),o.append(r),(r=$(document.createElement("td"))).text(isNaN(t.total_usd)?"--":function(e){switch(g){case"SBD":return(e.total_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.total_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.total_usd.formatMoney();case"POST REWARDS":return"$"+(e.total_usd/e.vote_usd*e.vote).formatMoney()}}(t)),o.append(r),r=$(document.createElement("td")),isNaN(t.total_usd)?r.text("unknown"):t.accepts_steem?r.html(Math.max(n,0).formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/> or '+Math.max(a,0).formatMoney()+" SBD"):r.text(Math.max(a,0).formatMoney()+" SBD"),o.append(r),(r=$(document.createElement("td"))).addClass("timer"),r.attr("dir","up"),r.attr("time",t.last),r.text(toTimer(t.last)),o.append(r),(r=$(document.createElement("td"))).addClass("timer"),r.attr("time",t.next),r.text(toTimer(t.next)),o.append(r),r=$(document.createElement("td"));var c=$('<div class="dropdown"><button class="btn btn-xs btn-warning dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Actions&nbsp;<span class="caret"></span></button></div>'),d=$('<ul class="actions dropdown-menu dropdown-menu-right" aria-labelledby="dLabel"></ul>');if(!isNaN(t.total_usd))(m=$('<li><a href="javascript:void(0);"><i class="fa fa-eye mr5"></i>Details</a></li>')).click(function(e){var o;o=t,$("#bid_details_bot").text(o.name),$("#bid_details_table_cur tbody").empty(),$("#bid_details_table_last tbody").empty(),$("#cur_round_vote").text("Loading..."),$("#cur_round_bids").text("Loading..."),$("#cur_round_value").text("Loading..."),$("#cur_round_roi").text("Loading..."),$("#last_round_vote").text("Loading..."),$("#last_round_bids").text("Loading..."),$("#last_round_value").text("Loading..."),$("#last_round_roi").text("Loading..."),$.get(_+"/bid_bots/"+o.name,function(e){var t=$("#bid_details_table_cur tbody");t.empty();var a=$("#bid_details_table_last tbody");if(a.empty(),e&&e.current_round){e.current_round.round_total=e.current_round.reduce(function(e,t){return e+getUsdValue(t)},0),M(t,o,e.current_round),$("#cur_round_vote").text(y(o)+" ("+o.interval/2.4*100+"%)"),$("#cur_round_bids").text(S(e.current_round,"SBD").formatMoney()+" SBD"+(o.accepts_steem?" & "+S(e.current_round,"STEEM").formatMoney()+" STEEM":"")),$("#cur_round_value").text("$"+o.total_usd.formatMoney());var n=100*(o.vote_usd*f/e.current_round.round_total-1);o.max_roi&&(n=Math.min(o.max_roi,n)),$("#cur_round_roi").text(n.formatMoney()+"% (After Curation"+(o.max_roi?" - Capped)":")"))}if(e&&e.last_round){e.last_round.round_total=e.last_round.reduce(function(e,t){return e+getUsdValue(t)},0),M(a,o,e.last_round),$("#last_round_vote").text(y(o)+" ("+o.interval/2.4*100+"%)"),$("#last_round_bids").text(S(e.last_round,"SBD").formatMoney()+" SBD"+(o.accepts_steem?" & "+S(e.last_round,"STEEM").formatMoney()+" STEEM":"")),$("#last_round_value").text("$"+e.last_round.round_total.formatMoney());var n=100*(o.vote_usd*f/e.last_round.round_total-1);o.max_roi&&(n=Math.min(o.max_roi,n)),$("#last_round_roi").text(n.formatMoney()+"% (After Curation"+(o.max_roi?" - Capped)":")"))}$("#cur_round_show").click(function(e){$("#cur_round").show(),$("#cur_round_show").parent().addClass("active"),$("#last_round").hide(),$("#last_round_show").parent().removeClass("active")}),$("#last_round_show").click(function(e){$("#cur_round").hide(),$("#cur_round_show").parent().removeClass("active"),$("#last_round").show(),$("#last_round_show").parent().addClass("active")})}),$("#bid_details").modal()}),d.append(m);if((m=$('<li><a href="javascript:void(0);"><i class="fa fa-upload mr5"></i>Send Bid</a></li>')).click(function(e){T(t)}),d.append(m),e)(m=$('<li><a href="javascript:void(0);"><i class="fa fa-heart mr5" style="color: red;"></i>Un-Favorite</a></li>')).click(function(e){b.splice(b.indexOf(t.name),1),localStorage.setItem("favorites",b.join()),w()}),d.append(m);else(m=$('<li><a href="javascript:void(0);"><i class="fa fa-heart mr5" style="color: red;"></i>Favorite</a></li>')).click(function(e){b.push(t.name),localStorage.setItem("favorites",b.join()),w()}),d.append(m);if(0<=E.indexOf(t.name))(m=$('<li><a href="javascript:void(0);"><i class="fa fa-remove mr5"></i>Un-Hide</a></li>')).click(function(e){E.splice(E.indexOf(t.name),1),localStorage.setItem("hidden",E.join()),w()}),d.append(m);else(m=$('<li><a href="javascript:void(0);"><i class="fa fa-remove mr5"></i>Hide</a></li>')).click(function(e){E.push(t.name),localStorage.setItem("hidden",E.join()),w()}),d.append(m);if(t.rules_url&&""!=t.rules_url){var m=$('<li><a href="'+t.rules_url+'" target="_blank"><i class="fa fa-list-alt mr5"></i>Terms of Service</a></li>');d.append(m)}c.append(d),r.append(c),o.append(r),(0<a||0<n)&&t.next<.16*HOURS&&t.last>.5*HOURS?(o.addClass("green-bg"),v[t.name]||(!function(e,t){if(x)try{"granted"!==Notification.permission?Notification.requestPermission():new Notification("Profitable Bidding Opportunity!",{icon:"https://steembottracker.com/img/bot_logo.png",body:"@"+e+" is currently showing a profitable bidding opportunity! Max profitable bid is $"+t.formatMoney()+" SBD."})}catch(e){}}(t.name,a),v[t.name]=!0)):v[t.name]=!1,(100==t.power&&t.last>4*HOURS||t.power<90)&&o.addClass("red-light-bg"),$("#bots_table tbody").append(o)}}function y(e){switch(g){case"SBD":return(e.vote_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.vote_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.vote_usd.formatMoney();case"POST REWARDS":return"$"+e.vote.formatMoney()}}function S(e,a){return e.reduce(function(e,t){return e+(t.currency==a?parseFloat(t.amount):0)},0)}function M(u,p,_){_.forEach(function(e){var t=parseFloat(e.amount),a=getUsdValue(e),n=e.currency,o=$(document.createElement("tr")),r=$(document.createElement("td"));(d=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+e.sender),d.attr("target","_blank"),d.text("@"+e.sender),r.append(d),o.append(r),(r=$(document.createElement("td"))).text(t.formatMoney()+" "+n),r.css("text-align","right"),o.append(r),(r=$(document.createElement("td"))).text("$"+a.formatMoney()),r.css("text-align","right"),o.append(r);r=$(document.createElement("td"));var i=0;if(e.weight)i=e.weight/100;else if(p.max_roi){var s=p.vote_usd*f*((100-p.max_roi)/100),l=p.total_usd<s?p.total_usd/s:1;i=a/_.round_total*100*l}else i=a/_.round_total*100;r.text(i.formatMoney()+"%"),r.css("text-align","right"),o.append(r);var c=((e.weight?e.weight/1e4:i/100)*parseFloat(y(p).replace(/[$,]/g,""))).formatMoney();c="SBD"==g||"STEEM"==g?c+" "+g:"$"+c,(r=$(document.createElement("td"))).text(c),r.css("text-align","right"),o.append(r);r=$(document.createElement("td"));var d,m=$(document.createElement("div"));m.css("width","250px"),m.css("overflow","hidden"),m.css("height","23px"),(d=$(document.createElement("a"))).attr("href","https://steemit.com"+e.url),d.attr("target","_blank"),d.text(e.url),m.append(d),r.append(m),o.append(r),u.append(o)})}function T(e){$("#bid_details_dialog_bot_name").text(e.name),$("#bid_details_error").hide(),$("#bid_details_btn_submit").click(r),$("#bid_details_post_url").val(""),$("#bid_details_bid_amount").val(e.min_bid),$("#bid_details_bid_amount").attr("min",e.min_bid),(i=$("#bid_details_dialog").modal()).off("hidden.bs.modal"),i.bot=e;var t=d?d.name:localStorage.getItem("bid_details_account_name");t&&($("#bid_details_account_name").val(t),s())}function r(){var e=$("#bid_details_dialog_bot_name").text(),t=$("#bid_details_account_name").val(),a=$("#bid_details_bid_amount").val(),n=$("#bid_details_bid_currency").val(),o=$("#bid_details_post_url").val(),r=popupCenter("https://v2.steemconnect.com/sign/transfer?from="+t+"&to="+e+"&amount="+a+" "+n+"&memo="+o,"sc2-pay",500,560);!function(r,e,t,a,i){{if("STEEM"==a&&!r.accepts_steem)return i("This bot does not accept STEEM bids!");if("STEEM"==a&&parseFloat(t)<r.min_bid_steem)return i("Bid is below the minimum, please bid "+r.min_bid_steem+" STEEM or more!");if("SBD"==a&&parseFloat(t)<r.min_bid)return i("Bid is below the minimum, please bid "+r.min_bid+" SBD or more!")}var n=e.substr(e.lastIndexOf("/")+1),o=e.substring(e.lastIndexOf("@")+1,e.lastIndexOf("/"));steem.api.getContent(o,n,function(e,t){if(!e&&t&&0<t.id){var a=new Date(t.created+"Z"),n=t.active_votes.filter(function(e){return e.voter==r.name}),o=0<n.length&&12e5<new Date-new Date(n[0].time+"Z");o?i("This bot has already voted on this post!"):new Date-a>=24*r.max_post_age*60*60*1e3?i("This post is past the max age accepted by this bot!"):i(null)}else i("There was an error loading this post, please check the URL.")})}(i.bot,o,a,n,function(e){e?($("#bid_details_error").html("<b>Error:</b> "+e),$("#bid_details_error").show(),r.close()):i.modal("hide")})}function s(){var e=$("#bid_details_account_name").val(),n=$("#bid_details_recent_posts"),o=(new Date).getTime()-24*(i.bot.max_post_age?i.bot.max_post_age:6)*60*60*1e3;steem.api.getDiscussionsByAuthorBeforeDate(e,null,(new Date).toISOString().split(".")[0],5,function(e,t){var a=t.filter(function(e){return new Date(e.created).getTime()>o});0<a.length?n.empty():n.html("None Found"),a.forEach(function(e){var t=25<e.title.length?e.title.substring(0,22)+"...":e.title,a=$('<button type="button" class="btn btn-info btn-xs" style="margin: 0 5px;">'+t+"</button>");n.append(a),a.click(function(){$("#bid_details_post_url").val("https://steemit.com"+e.url)})})})}function m(n,o){var e=n.memo.substr(n.memo.lastIndexOf("/")+1),t=n.memo.substring(n.memo.lastIndexOf("@")+1,n.memo.lastIndexOf("/"));steem.api.getContent(t,e,function(e,t){if(!e&&t&&0<t.id){var a=t.active_votes.find(function(e){return e.voter==n.to});a&&(n.vote_rshares=a.rshares,n.vote_percent=a.percent),n.title=t.title}else console.log(e);o&&o()})}function k(e){var l=$("#user_bids_table tbody");l.empty(),$("#user_bids_name").text(d.name),e.reverse(),e.forEach(function(e){if(e.title){var t=parseFloat(e.amount),a=getUsdValue(e),n=getCurrency(e.amount),o=$(document.createElement("tr")),r=$(document.createElement("td"));(i=$(document.createElement("a"))).attr("href",e.memo),i.attr("target","_blank"),i.text(30<e.title.length?e.title.substr(0,30)+"...":e.title),r.append(i),o.append(r);var i;r=$(document.createElement("td"));(i=$(document.createElement("a"))).attr("href","https://steemit.com/@"+e.to),i.attr("target","_blank"),i.text("@"+e.to),r.append(i),o.append(r),(r=$(document.createElement("td"))).text(t.formatMoney()+" "+n+(e.refunded?" (refunded)":"")),r.css("text-align","right"),o.append(r),(r=$(document.createElement("td"))).text("$"+a.formatMoney()),r.css("text-align","right"),o.append(r),(r=$(document.createElement("td"))).text(e.refunded||!e.vote_rshares?"--":(e.vote_percent/100).formatMoney()+"%"),r.css("text-align","right"),o.append(r);var s=e.vote_rshares*rewardBalance/recentClaims*steemPrice;(r=$(document.createElement("td"))).text(e.refunded||!e.vote_rshares?"--":"$"+s.formatMoney()),r.css("text-align","right"),o.append(r),(r=$(document.createElement("td"))).text(e.refunded||!e.vote_rshares?"--":"$"+(s/2*sbd_price+s/2).formatMoney()),r.css("text-align","right"),o.append(r),(r=$(document.createElement("td"))).text(e.refunded||!e.vote_rshares?"--":(100*((s/2*sbd_price+s/2)/a-1)).formatMoney()+"%"),r.css("text-align","right"),o.append(r),l.append(o)}})}e(a),setInterval(e,3e4),t(),setInterval(t,6e5),updateSteemVariables(n),setInterval(n,6e5),setInterval(a,3e4),setInterval(updateTimers,1e3),function(){function e(e){h[e]=!h[e],$("#filter_"+e).css("border",h[e]?"2px solid green":"none"),w()}$("#curation_option").on("change",function(){f=this.checked?.75:1,w()}),$("#notification_option").on("change",function(){x=this.checked,localStorage.setItem("notifications_enabled",this.checked)}),localStorage.hasOwnProperty("notifications_enabled")&&(x="true"==localStorage.getItem("notifications_enabled"),$("#notification_option").attr("checked",x)),localStorage.hasOwnProperty("favorites")&&(b=localStorage.getItem("favorites").split(",")),localStorage.hasOwnProperty("hidden")&&(E=localStorage.getItem("hidden").split(",").filter(function(e){return""!=e})),$("#unhide_link a").click(function(){E=[],localStorage.setItem("hidden",""),w(),$("#unhide_link").hide()}),localStorage.hasOwnProperty("currency_list")?($("#currency_list").val(localStorage.getItem("currency_list")),g=localStorage.getItem("currency_list")):localStorage.setItem("currency_list","USD"),$("#currency_list").change(function(){g=$("#currency_list").val(),localStorage.setItem("currency_list",g),w()}),$("#min_vote_slider").slider(),$("#bid_details_account_name").on("change",function(e){localStorage.setItem("bid_details_account_name",$("#bid_details_account_name").val()),s()}),localStorage.hasOwnProperty("min_vote_slider")?($("#min_vote_slider").slider("setValue",localStorage.getItem("min_vote_slider")),p=parseFloat(localStorage.getItem("min_vote_slider"))):localStorage.setItem("min_vote_slider",p),$("#min_vote_slider").on("slide",function(e){e.value!=p&&(p=parseFloat(e.value),localStorage.setItem("min_vote_slider",e.value),w())}),$("#calculate_vote").click(function(){var t=null,a=$("#bot_list").val();l.forEach(function(e){e.name!=a||(t=e)});var e=$("#calc_currency").val(),n=parseFloat($("#bid_amount").val()),o="SBD"==e?n*sbd_price:n*steem_price,r=o/(o+t.total_usd)*t.vote_usd,i=o/(o+t.total_usd)*t.vote/2,s=o/(o+t.total_usd)*t.vote/2/steem_price;return $("#bid_value").text("$"+o.formatMoney()),$("#vote_value").text("$"+r.formatMoney()+" = "+i.formatMoney()+" SBD + "+s.formatMoney()+" STEEM"),$("#vote_value_net").text("$"+(.75*r).formatMoney()+" = "+(.75*i).formatMoney()+" SBD + "+(.75*s).formatMoney()+" STEEM"),$("#vote_value").css("color",o<=r?"#008800":"#FF0000"),$("#vote_value_net").css("color",o<=.75*r?"#008800":"#FF0000"),!1}),$("#close_peg_msg").click(function(){$("#peg_msg").hide(),localStorage.setItem("hide_peg_msg",!0)}),localStorage.hasOwnProperty("hide_peg_msg")&&$("#peg_msg").hide(),localStorage.hasOwnProperty("accept_disclaimer")||setTimeout(function(){$("#disclaimer").modal(),localStorage.setItem("accept_disclaimer",!0)},2e3),$("#filter_verified").click(function(){e("verified")}),$("#filter_refund").click(function(){e("refund")}),$("#filter_steem").click(function(){e("steem")}),$("#filter_funding").click(function(){e("funding")}),$("#filter_nocomment").click(function(){e("nocomment")}),$("#minnowbooster-submit").click(function(){T({name:"minnowbooster",min_bid:.01,max_post_age:6.3})}),$("#randowhale-submit").click(function(){T({name:"randowhale",min_bid:1,max_post_age:3.5})}),$("#smartsteem-submit").click(function(){T({name:"smartmarket",min_bid:.1,max_post_age:6.3})});var a=getURLParameter("access_token")?getURLParameter("access_token"):localStorage.getItem("access_token");sc2.init({baseURL:"https://v2.steemconnect.com",app:"bottracker.app",accessToken:a,callbackURL:"https://steembottracker.com",scope:["login","vote"]}),sc2.me(function(e,t){t&&!e?(console.log(t),d=t.account,$("#btn_login").hide(),$("#user_info").show(),$("#login_info").text("@"+d.name),localStorage.setItem("access_token",a)):($("#btn_login").show(),$("#user_info").hide())}),$("#btn_logout").click(function(){localStorage.removeItem("access_token"),window.location.href=window.location.pathname}),$("#btn_bid_history").click(function(){$("#user_bids").modal(),steem.api.getAccountHistory(d.name,-1,1e3,function(e,t){for(var a=[],n=0,o=0;o<t.length;o++){var r=t[o],i=r[1].op,s=i[1];if("transfer"==i[0]&&l.find(function(e){return e.name==s.to})){if(s.memo.lastIndexOf("/")<0||s.memo.lastIndexOf("@")<0)continue;a.push(s),m(s,function(){++n>=a.length&&(console.log(a),k(a))})}else if("transfer"==i[0]&&l.find(function(e){return e.name==s.from})){var s=a.find(function(e){return e.to==i[1].from&&e.amount==i[1].amount});s&&(s.refunded=!0)}}})}),$("#btn_front_run").click(function(){$.get(_+"/posts",function(e){var i=e,s=0;i.forEach(function(r){var e=r.permlink,t=r.author;steem.api.getContent(t,e,function(e,t){if(!e&&t&&0<t.id){r.created=new Date(t.created+"Z"),r.payout=parseFloat(t.pending_payout_value),r.title=t.title,r.author=t.author,r.permlink=t.permlink;var a=Math.min(new Date-new Date(t.created+"Z"),c)/c;r.curation_reward=(Math.sqrt(.25*(r.payout+1))-Math.sqrt(.25*r.payout))*Math.sqrt(.25*(r.payout+1+r.vote_value))*a,d&&(r.voted=null!=t.active_votes.find(function(e){return e.voter==d.name}))}var n,o;++s>=i.length&&(i.sort(function(e,t){return parseFloat(t.curation_reward)-parseFloat(e.curation_reward)}),n=i,(o=$("#front_runner_table tbody")).empty(),n.forEach(function(t){if(t.title){var e=$(document.createElement("tr")),a=$(document.createElement("td")),n=$(document.createElement("a"));n.attr("href","https://steemit.com/@"+t.author),n.attr("target","_blank"),n.text("@"+t.author),a.append(n),e.append(a);var a=$(document.createElement("td")),n=$(document.createElement("a"));n.attr("href","https://steemit.com"+t.url),n.attr("target","_blank"),n.text(40<t.title.length?t.title.substr(0,40)+"...":t.title),a.append(n),e.append(a);var a=$(document.createElement("td"));a.text("$"+t.payout.formatMoney()),a.css("text-align","right"),e.append(a);var a=$(document.createElement("td"));a.text("$"+parseFloat(t.amount).formatMoney()),a.css("text-align","right"),e.append(a);var a=$(document.createElement("td"));a.text("$"+t.vote_value.formatMoney()),a.css("text-align","right"),e.append(a);var a=$(document.createElement("td"));if(a.text("$"+t.curation_reward.formatMoney()+" / $1"),a.css("text-align","right"),e.append(a),a=$(document.createElement("td")),t.voted)a.text("Voted");else{var n=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-thumbs-up mr5"></i>Upvote</button>');n.click(function(e){d?(a.empty(),a.text("Voting..."),sc2.vote(d.name,t.author,t.permlink,1e4,function(e,t){console.log(e,t),t&&!e?a.text("Success!"):(a.empty(),a.append(n))})):window.location.href=sc2.getLoginURL()}),a.append(n)}a.css("text-align","center"),e.append(a),o.append(e)}}))})})}),$("#front_runner_dialog").modal()})}()});