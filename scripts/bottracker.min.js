function getCurrency(t){return t.substr(t.indexOf(" ")+1)}function getURLParameter(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getUsdValue(t){return t.currency?parseFloat(t.amount)*("SBD"==t.currency?sbd_price:steem_price):parseFloat(t.amount)*("SBD"==getCurrency(t.amount)?sbd_price:steem_price)}function toTimer(t){var e=Math.floor(t/HOURS),a=Math.floor(t%HOURS/6e4),n=Math.floor(t%6e4/1e3);return e+":"+padLeft(a,2)+":"+padLeft(n,2)}function padLeft(t,e){var a=(t+"").length;if(a>=e)return t+"";for(var n=a;n<e;n++)t="0"+t;return t}function updateTimers(){for(var t=$(".timer"),e=0;e<t.length;e++){var a=$(t[e]);if(!a.attr("time"))return;var n=parseInt(a.attr("time"));"up"==a.attr("dir")?n+=1e3:n=Math.max(n-1e3,0),a.attr("time",n),a.text(toTimer(n))}}function updateSteemVariables(){steem.api.getRewardFund("post",function(t,e){rewardBalance=parseFloat(e.reward_balance.replace(" STEEM","")),recentClaims=e.recent_claims}),steem.api.getCurrentMedianHistoryPrice(function(t,e){steemPrice=parseFloat(e.base.replace(" SBD",""))/parseFloat(e.quote.replace(" STEEM",""))}),steem.api.getDynamicGlobalProperties(function(t,e){votePowerReserveRate=e.vote_power_reserve_rate,totalVestingFund=parseFloat(e.total_vesting_fund_steem.replace(" STEEM","")),totalVestingShares=parseFloat(e.total_vesting_shares.replace(" VESTS",""));var a=e.total_vesting_fund_steem.replace(" STEEM",""),n=e.total_vesting_shares.replace(" VESTS","");steem_per_mvests=a/n*1e6}),setTimeout(updateSteemVariables,18e4)}function getVotingPower(t){var e=t.voting_power,a=new Date(t.last_vote_time+"Z"),n=(new Date-a)/1e3,o=Math.round(STEEMIT_100_PERCENT*n/STEEMIT_VOTE_REGENERATION_SECONDS);return Math.min(e+o,STEEMIT_100_PERCENT)}function getVoteRShares(t,e,a){if(e&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){var n=Math.round(1e6*getVestingShares(e)),o=e.voting_power,r=100*t,i=new Date(e.last_vote_time+"Z"),s=(new Date-i)/1e3,l=Math.round(STEEMIT_100_PERCENT*s/STEEMIT_VOTE_REGENERATION_SECONDS),d=a||Math.min(o+l,STEEMIT_100_PERCENT),c=votePowerReserveRate*STEEMIT_VOTE_REGENERATION_SECONDS/86400,m=Math.round(d*r/STEEMIT_100_PERCENT);m=Math.round((m+c-1)/c);return Math.round(n*m/STEEMIT_100_PERCENT)}}function getVoteValue(t,e,a){if(e&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){return getVoteRShares(t,e,a)*rewardBalance/recentClaims*steemPrice}}function timeTilFullPower(t){var e=getVotingPower(t);return(STEEMIT_100_PERCENT-e)*STEEMIT_VOTE_REGENERATION_SECONDS/STEEMIT_100_PERCENT}function getVestingShares(t){return parseFloat(t.vesting_shares.replace(" VESTS",""))+parseFloat(t.received_vesting_shares.replace(" VESTS",""))-parseFloat(t.delegated_vesting_shares.replace(" VESTS",""))}var STEEMIT_100_PERCENT=1e4,STEEMIT_VOTE_REGENERATION_SECONDS=432e3,HOURS=36e5,steem_price=1,sbd_price=1;Number.prototype.formatMoney=function(t,e,a){var n=this,o=(t=isNaN(t=Math.abs(t))?2:t,e=void 0==e?".":e,a=void 0==a?",":a,n<0?"-":""),r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(t))),i=(i=r.length)>3?i%3:0;return o+(i?r.substr(0,i)+a:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(t?e+Math.abs(n-r).toFixed(t).slice(2):"")};var steemPrice,rewardBalance,recentClaims,currentUserAccount,votePowerReserveRate,totalVestingFund,totalVestingShares,steem_per_mvests;$(document).ready(function(){$(".modal.modal-center").on("show.bs.modal",function(t){$(".modal.modal-center").each(function(){0==$(this).hasClass("in")&&$(this).show();var t=$(window).height()-60,e=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return t}}),$(this).find(".modal-body").css({"max-height":function(){return t-(e+a)}}),$(this).find(".modal-dialog").addClass("modal-dialog-center").css({"margin-top":function(){return-$(this).outerHeight()/2},"margin-left":function(){return-$(this).outerWidth()/2}}),0==$(this).hasClass("in")&&$(this).hide()})})}),$(function(){function t(){$.get("https://api.coinmarketcap.com/v1/ticker/steem/",function(t){steem_price=parseFloat(t[0].price_usd),$("#steem_price").text(steem_price.formatMoney())}),$.get("https://api.coinmarketcap.com/v1/ticker/steem-dollars/",function(t){sbd_price=parseFloat(t[0].price_usd),$("#sbd_price").text(sbd_price.formatMoney())})}function e(){steem.api.getAccounts(["smartsteem","randowhale","minnowbooster"],function(t,e){try{var a=e[0],n=$("#smartsteem-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#smartsteem-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#ss_bot_error").css("display","none"),a=e[1];var r=JSON.parse(a.json_metadata);$("#randowhale-desc").text(r.profile.about);var i=r.config,s=$("#randowhale-status");s.text(i.sleep?"Sleeping":"Awake!"),i.sleep?(s.removeClass("label-success"),s.addClass("label-default"),$("#randowhale-submit").attr("disabled","disabled")):(s.removeClass("label-default"),s.addClass("label-success"),$("#randowhale-submit").removeAttr("disabled")),$("#randowhale-fee").text(i.fee_sbd.formatMoney()+" SBD");n=$("#randowhale-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#randowhale-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#rw_bot_error").css("display","none"),a=e[2];n=$("#minnowbooster-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#minnowbooster-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#mb_bot_error").css("display","none")}catch(t){$("#ss_bot_error").css("display","block")}}),y||$.get("https://smartsteem.com/api/general/bot_tracker",function(t){$("#smartsteem-desc").text(t.description),$("#smartsteem-profit").text(t.profit),$("#smartsteem-payment").text(t.payment),$("#smartsteem-daily").text(t.daily_limit),$("#smartsteem-weekly").text(t.weekly_limit),$("#smartsteem-features").text(t.additional_features),$("#smartsteem-howto").empty(),t.how_to.forEach(function(t){$("#smartsteem-howto").append($("<li>"+t+"</li>"))}),y=!0}),$.get("https://www.minnowbooster.net/api/global",function(t){$("#minnowbooster-min").text("$"+t.min_upvote+" SBD")}),$.get("https://www.minnowbooster.net/upvotes.json",function(t){for(var e=0;e<5;e++){var a=t[e];$("#mb-upvote-"+e).html('<a href="http://steemit.com/@'+a.sender_name+'">'+a.sender_name+"</a> received a <strong>$"+parseFloat(a.value).formatMoney()+" upvote for $"+parseFloat(a.sbd).formatMoney()+' SBD</strong> on <a href="'+a.url+'">'+a.url+"</a> at "+new Date(a.created_at).toLocaleDateString()+" "+new Date(a.created_at).toLocaleTimeString())}}),steem.api.getAccounts(w,function(t,e){try{e.sort(function(t,e){return getVoteValue(100,e)-getVoteValue(100,t)});var a=$("#other_table tbody");a.empty(),e.forEach(function(t){var e=$(document.createElement("tr")),n=$('<td><a target="_blank" href="https://steemit.com/@'+t.name+'">@'+t.name+"</a></td>");e.append(n),n=$("<td>$"+getVoteValue(100,t).formatMoney()+"</td>"),e.append(n);var o=JSON.parse(t.json_metadata);n=$("<td>"+(o.profile.about?o.profile.about:"")+"</td>"),e.append(n),n=$("<td>"+(o.profile.website?'<a target="_blank" href="'+o.profile.website+'">'+o.profile.website+"</a>":"")+"</td>"),e.append(n),a.append(e)}),$("#other_bot_error").css("display","none")}catch(t){$("#other_bot_error").css("display","block")}}),setTimeout(e,6e5)}function a(){steem.api.getAccounts(E,function(t,e){try{e.forEach(function(t){var e=getVoteValue(100,t),a=new Date(t.last_vote_time+"Z"),r=h.filter(function(e){return e.name==t.name})[0];if(null!=t.json_metadata&&""!=t.json_metadata){var i=JSON.parse(t.json_metadata);if(i&&i.config){var s=i.config;s.min_bid_sbd&&parseFloat(s.min_bid_sbd)>0&&(r.min_bid=parseFloat(s.min_bid_sbd)),s.min_bid_steem&&parseFloat(s.min_bid_steem)>0&&(r.min_bid_steem=parseFloat(s.min_bid_steem)),s.bid_window&&parseFloat(s.bid_window)>0&&(r.interval=parseFloat(s.bid_window)),s.pre_vote_group_url&&""!=s.pre_vote_group_url&&(r.pre_vote_group_url=s.pre_vote_group_url),s.funding_url&&""!=s.funding_url&&(r.funding_url=s.funding_url),void 0!=s.accepts_steem&&(r.accepts_steem=s.accepts_steem),void 0!=s.refunds&&(r.refunds=s.refunds),void 0!=s.comments&&(r.comments=s.comments),void 0!=s.is_disabled&&(r.is_disabled=s.is_disabled),s.api_url&&""!=s.api_url&&(r.api_url=s.api_url),s.max_post_age&&parseFloat(s.max_post_age)>0&&(r.max_post_age=parseFloat(s.max_post_age))}}if(!(r.is_disabled||(r.last_vote_time=a,r.vote=e*r.interval/2.4,r.power=getVotingPower(t)/100,r.last=new Date-a,r.next=1e3*timeTilFullPower(t),r.vote_usd=r.vote/2*sbd_price+r.vote/2,r.vote_usd<v||M.verified&&!r.api_url||M.refund&&!r.refunds||M.steem&&!r.accepts_steem||M.frontrunner&&!r.pre_vote_group_url||M.funding&&!r.funding_url))){var l=300;if(r.next<3e5?l=10:r.next<12e5&&(l=30),!(new Date-r.last_update<1e3*l))if(r.last_update=new Date,r.api_url)!function(t){$.get(t.api_url,function(e){t.rounds=[],n(t,e.last_round);var a=n(t,e.current_round);t.total=a.total,t.total_usd=a.total_usd,t.bid=(t.vote-f*t.total)/f})}(r);else{var d=20;x&&(d=2e3),steem.api.getAccountHistory(t.name,-1,d,function(e,a){if(!e){r.rounds||(r.rounds=[]);var n=null;0==r.rounds.length?(n={last_vote_time:0,bids:[],total:0,total_usd:0},r.rounds.push(n)):n=r.rounds[r.rounds.length-1],a.forEach(function(e){var a=e[1].op,i=new Date(e[1].timestamp+"Z");if("transfer"==a[0]&&a[1].to==t.name&&i>n.last_vote_time){if(!o(a[1].memo))return;var s=getCurrency(a[1].amount);if(!r.accepts_steem&&"STEEM"==s)return;if(0==n.bids.filter(function(t){return t.id==e[0]}).length){var l=parseFloat(a[1].amount);l>=r.min_bid&&(n.bids.push({id:e[0],data:a[1]}),n.total+=l,n.total_usd+=getUsdValue(a[1]))}}else"vote"==a[0]&&a[1].voter==t.name&&null==(n=r.rounds.filter(function(t){return t.last_vote_time>=i-72e5})[0])&&(n={last_vote_time:i,bids:[],total:0,total_usd:0},r.rounds.push(n))}),r.total=n.total,r.total_usd=n.total_usd,r.bid=(r.vote-f*r.total)/f}})}}}),$("#bid_bot_error").css("display","none"),x=!1}catch(t){$("#bid_bot_error").css("display","block")}setTimeout(r,5e3),setTimeout(a,1e4)})}function n(t,e){var a={bids:[],total:0};return null!=e&&void 0!=e||(e=[]),a.total=e.reduce(function(t,e){return t+e.amount},0),a.total_usd=e.reduce(function(t,e){return t+getUsdValue(e)},0),a.bids=e.map(function(t){return{data:{amount:t.amount+" "+t.currency,from:t.sender,memo:"https://steemit.com"+t.url,weight:t.weight}}}),t.rounds.push(a),a}function o(t){return t.lastIndexOf("/")>=0&&t.lastIndexOf("@")>=0}function r(){0!=h.length&&h[0].vote&&($("#bots_table tbody").empty(),h.sort(function(t,e){return(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)-(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)}),h.forEach(function(t){if(!(t.vote_usd<v)&&t.vote&&t.rounds&&0!=t.rounds.length&&!t.is_disabled&&!(M.verified&&!t.api_url||M.refund&&!t.refunds||M.steem&&!t.accepts_steem||M.frontrunner&&!t.pre_vote_group_url||M.funding&&!t.funding_url)){var e=(g*t.vote_usd-f*t.total_usd)/sbd_price,a=t.accepts_steem?(g*t.vote_usd-f*t.total_usd)/steem_price:0,n=$(document.createElement("tr")),o=$(document.createElement("td"));(_=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+t.name),_.attr("target","_blank");var r="@"+t.name;if((100==t.power&&t.last>4*HOURS||t.power<90)&&(r+=" (DOWN)"),_.html("<img class='userpic' src='https://steemitimages.com/u/"+t.name+"/avatar'></img>"+r),o.append(_),t.comments){var c=$('<span class="fa fa-comment-o ml5" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows Comments"></span>');o.append(c)}if(t.pre_vote_group_url&&""!=t.pre_vote_group_url){c=$('<a href="'+t.pre_vote_group_url+'" target="_blank">&nbsp;<img src="img/frontrunner.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot has a Pre-Vote Group which will give you additional upvotes - Click for Details"/></a>');o.append(c)}if(t.accepts_steem){c=$('<img src="img/steem.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot accepts STEEM bids!" />');o.append(c)}if(t.refunds){c=$('<img src="img/refund.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot automatically refunds invalid bids!" />');o.append(c)}if(t.api_url){var m=$('<img src="img/verified.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot provides a bid API so the data shown here is guaranteed to be accurate!" />');o.append(m)}if(t.funding_url){c=$('<a href="'+t.funding_url+'" target="_blank"><img src="img/funding.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot uses a portion of its earnings to fund other projects and initiatives - Click for Details"/></a>');o.append(c)}n.append(o),(o=$(document.createElement("td"))).text(i(t)),n.append(o);var u="";t.accepts_steem&&(u=t.min_bid_steem&&t.min_bid_steem!=t.min_bid?" or "+t.min_bid_steem.formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>':' or <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>'),(o=$(document.createElement("td"))).html(t.min_bid.formatMoney()+" SBD"+u),n.append(o),(o=$(document.createElement("td"))).text(t.max_post_age?t.max_post_age+" days":"unknown"),n.append(o),(o=$(document.createElement("td"))).text(function(t){switch(b){case"SBD":return(t.total_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(t.total_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+t.total_usd.formatMoney();case"POST REWARDS":return"$"+(t.total_usd/t.vote_usd*t.vote).formatMoney()}}(t)),n.append(o),o=$(document.createElement("td")),t.accepts_steem?o.html(Math.max(a,0).formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/> or '+Math.max(e,0).formatMoney()+" SBD"):o.text(Math.max(e,0).formatMoney()+" SBD"),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("dir","up"),o.attr("time",t.last),o.text(toTimer(t.last)),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("time",t.next),o.text(toTimer(t.next)),n.append(o),o=$(document.createElement("td"));(_=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-eye mr5"></i>Details</button>')).click(function(e){!function(t){$("#bid_details_bot").text(t.name);var e=$("#bid_details_table_cur tbody");e.empty();var a=$("#bid_details_table_last tbody");if(a.empty(),t.rounds&&t.rounds.length>0){var n=t.rounds[t.rounds.length-1];l(e,t,n),$("#cur_round_vote").text(i(t)+" ("+t.interval/2.4*100+"%)"),$("#cur_round_bids").text(s(n,"SBD").formatMoney()+" SBD"+(t.accepts_steem?" & "+s(n,"STEEM").formatMoney()+" STEEM":"")),$("#cur_round_value").text("$"+t.total_usd.formatMoney()),$("#cur_round_roi").text((100*(t.vote_usd*g/n.total_usd-1)).formatMoney()+"% (After Curation)")}if(t.rounds&&t.rounds.length>1){var n=t.rounds[t.rounds.length-2];l(a,t,n),$("#last_round_vote").text(i(t)+" ("+t.interval/2.4*100+"%)"),$("#last_round_bids").text(s(n,"SBD").formatMoney()+" SBD"+(t.accepts_steem?" & "+s(n,"STEEM").formatMoney()+" STEEM":"")),$("#last_round_value").text("$"+n.total_usd.formatMoney()),$("#last_round_roi").text((100*(t.vote_usd*g/n.total_usd-1)).formatMoney()+"% (After Curation)")}$("#cur_round_show").click(function(t){$("#cur_round").show(),$("#cur_round_show").parent().addClass("active"),$("#last_round").hide(),$("#last_round_show").parent().removeClass("active")}),$("#last_round_show").click(function(t){$("#cur_round").hide(),$("#cur_round_show").parent().removeClass("active"),$("#last_round").show(),$("#last_round_show").parent().addClass("active")}),$("#bid_details").modal()}(t)}),o.append(_),n.append(o),o=$(document.createElement("td"));var _;(_=$('<button type="button" class="btn btn-warning btn-xs"><i class="fa fa-upload mr5"></i>Send Bid</button>')).click(function(e){d(t)}),o.append(_),n.append(o),(e>0||a>0)&&t.next<.16*HOURS&&t.last>.5*HOURS?(n.addClass("green-bg"),t.notif||(!function(t,e){try{"granted"!==Notification.permission?Notification.requestPermission():new Notification("Profitable Bidding Opportunity!",{icon:"https://i.imgur.com/SEm0LBl.jpg",body:"@"+t+" is currently showing a profitable bidding opportunity! Max profitable bid is $"+e.formatMoney()+" SBD."})}catch(t){}}(t.name,e),t.notif=!0)):t.notif=!1,(100==t.power&&t.last>4*HOURS||t.power<90)&&n.addClass("red-light-bg"),$("#bots_table tbody").append(n),$('[data-toggle="tooltip"]').tooltip()}}))}function i(t){switch(b){case"SBD":return(t.vote_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(t.vote_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+t.vote_usd.formatMoney();case"POST REWARDS":return"$"+t.vote.formatMoney()}}function s(t,e){return t.bids.reduce(function(t,a){return getCurrency(a.data.amount)==e?t+parseFloat(a.data.amount):t},0)}function l(t,e,a){a.bids.forEach(function(n){var o=parseFloat(n.data.amount),r=getUsdValue(n.data),s=getCurrency(n.data.amount),l=$(document.createElement("tr")),d=$(document.createElement("td"));if((_=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+n.data.from),_.attr("target","_blank"),_.text("@"+n.data.from),n.invalid){var c=$('<span class="fa fa-warning mr5 color-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Invalid Post"></span>&nbsp;');d.append(c),l.addClass("red-light-bg")}d.append(_),l.append(d);(d=$(document.createElement("td"))).text(o.formatMoney()+" "+s),d.css("text-align","right"),l.append(d);(d=$(document.createElement("td"))).text("$"+("SBD"==s?o*sbd_price:o*steem_price).formatMoney()),d.css("text-align","right"),l.append(d);(d=$(document.createElement("td"))).text((r/a.total_usd*100).formatMoney()+"%"),d.css("text-align","right"),l.append(d);var m=(r/a.total_usd*parseFloat(i(e).replace(/[$,]/g,""))).formatMoney();m="SBD"==b||"STEEM"==b?m+" "+b:"$"+m;(d=$(document.createElement("td"))).text(m),d.css("text-align","right"),l.append(d);d=$(document.createElement("td"));var u=$(document.createElement("div"));u.css("width","250px"),u.css("overflow","hidden"),u.css("height","23px");var _;(_=$(document.createElement("a"))).attr("href",n.data.memo),_.attr("target","_blank"),_.text(n.data.memo),u.append(_),d.append(u),l.append(d),t.append(l)})}function d(t){$("#bid_details_dialog_bot_name").text(t.name),$("#bid_details_error").hide(),$("#bid_details_btn_submit").click(c),$("#bid_details_post_url").val(""),$("#bid_details_bid_amount").val(t.min_bid),$("#bid_details_bid_amount").attr("min",t.min_bid),(S=$("#bid_details_dialog").modal()).off("hidden.bs.modal"),S.bot=t;var e=D?D.name:localStorage.getItem("bid_details_account_name");e&&($("#bid_details_account_name").val(e),m())}function c(){var t=$("#bid_details_dialog_bot_name").text(),e=$("#bid_details_account_name").val(),a=$("#bid_details_bid_amount").val(),n=$("#bid_details_bid_currency").val(),o=$("#bid_details_post_url").val();!function(t,e,a,n,o){if("STEEM"!=n||t.accepts_steem)if("STEEM"==n&&parseFloat(a)<t.min_bid_steem)o("Bid is below the minimum, please bid "+t.min_bid_steem+" STEEM or more!");else if("SBD"==n&&parseFloat(a)<t.min_bid)o("Bid is below the minimum, please bid "+t.min_bid+" SBD or more!");else{var r=e.substr(e.lastIndexOf("/")+1),i=e.substring(e.lastIndexOf("@")+1,e.lastIndexOf("/"));steem.api.getContent(i,r,function(e,a){if(!e&&a&&a.id>0){var n=new Date(a.created+"Z"),r=a.active_votes.filter(function(e){return e.voter==t.name});r.length>0&&new Date-new Date(r[0].time+"Z")>12e5?o("This bot has already voted on this post!"):new Date-n>=24*t.max_post_age*60*60*1e3?o("This post is past the max age accepted by this bot!"):o(null)}else o("There was an error loading this post, please check the URL.")})}else o("This bot does not accept STEEM bids!")}(S.bot,o,a,n,function(r){r?($("#bid_details_error").html("<b>Error:</b> "+r),$("#bid_details_error").show()):(S.on("hidden.bs.modal",function(r){$("#bid_dialog_bot_name").text(t),$("#bid_dialog_frame").attr("src","https://v2.steemconnect.com/sign/transfer?from="+e+"&to="+t+"&amount="+a+" "+n+"&memo="+o),S=$("#bid_dialog").modal()}),S.modal("hide"))})}function m(){var t=$("#bid_details_account_name").val(),e=$("#bid_details_recent_posts"),a=(new Date).getTime()-24*(S.bot.max_post_age?S.bot.max_post_age:6)*60*60*1e3;steem.api.getDiscussionsByAuthorBeforeDate(t,null,(new Date).toISOString().split(".")[0],5,function(t,n){var o=n.filter(function(t){return new Date(t.created).getTime()>a});o.length>0?e.empty():e.html("None Found"),o.forEach(function(t){var a=t.title.length>25?t.title.substring(0,22)+"...":t.title,n=$('<button type="button" class="btn btn-info btn-xs" style="margin: 0 5px;">'+a+"</button>");e.append(n),n.click(function(){$("#bid_details_post_url").val("https://steemit.com"+t.url)})})})}function u(t){M[t]=!M[t],$("#filter_"+t).css("border",M[t]?"2px solid green":"none"),r()}function _(){steem.api.getAccountHistory(D.name,-1,1e3,function(t,e){for(var a=[],n=0,r=0;r<e.length;r++){var i=e[r][1].op,s=i[1];if("transfer"==i[0]&&E.indexOf(s.to)>=0){if(!o(s.memo))continue;a.push(s),function(t,e){var a=t.memo.substr(t.memo.lastIndexOf("/")+1),n=t.memo.substring(t.memo.lastIndexOf("@")+1,t.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){if(!a&&n&&n.id>0){var o=n.active_votes.find(function(e){return e.voter==t.to});o&&(t.vote_rshares=o.rshares,t.vote_percent=o.percent),t.title=n.title}else console.log(a);e&&e()})}(s,function(){++n>=a.length&&(console.log(a),function(t){var e=$("#user_bids_table tbody");e.empty(),$("#user_bids_name").text(D.name),t.reverse(),t.forEach(function(t){if(t.title){var a=parseFloat(t.amount),n=getUsdValue(t),o=getCurrency(t.amount),r=$(document.createElement("tr")),i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href",t.memo),s.attr("target","_blank"),s.text(t.title.length>30?t.title.substr(0,30)+"...":t.title),i.append(s),r.append(i);var i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href","https://steemit.com/@"+t.to),s.attr("target","_blank"),s.text("@"+t.to),i.append(s),r.append(i);var i=$(document.createElement("td"));i.text(a.formatMoney()+" "+o+(t.refunded?" (refunded)":"")),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text("$"+n.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(t.refunded||!t.vote_rshares?"--":(t.vote_percent/100).formatMoney()+"%"),i.css("text-align","right"),r.append(i);var l=t.vote_rshares*rewardBalance/recentClaims*steemPrice,i=$(document.createElement("td"));i.text(t.refunded||!t.vote_rshares?"--":"$"+l.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(t.refunded||!t.vote_rshares?"--":"$"+(l/2*sbd_price+l/2).formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(t.refunded||!t.vote_rshares?"--":(100*((l/2*sbd_price+l/2)/n-1)).formatMoney()+"%"),i.css("text-align","right"),r.append(i),e.append(r)}})}(a))})}else if("transfer"==i[0]&&E.indexOf(i[1].from)>=0){(s=a.find(function(t){return t.to==i[1].from&&t.amount==i[1].amount}))&&(s.refunded=!0)}}})}function p(){for(var t=h.filter(function(t){return t.vote>=100}),e=[],a=t.length,n=0;n<a;n++)for(var o=t[n],r=o.rounds[o.rounds.length-1].bids.filter(function(t){return parseFloat(t.data.amount)>=10}),i=0;i<r.length;i++){var s=r[i],l=e.find(function(t){return t.memo==s.data.memo}),d=getUsdValue(s.data),c=o.vote*(d/(o.vote_usd*g));l?(l.currency||(l.currency=getCurrency(l.amount)),l.amount=parseFloat(l.amount)+parseFloat(s.data.amount),l.bots.push(o.name),l.vote_value+=c):(s.data.bots=[o.name],s.data.vote_value=c,e.push(s.data))}var m=0;e.forEach(function(t){var a=t.memo.substr(t.memo.lastIndexOf("/")+1),n=t.memo.substring(t.memo.lastIndexOf("@")+1,t.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){!a&&n&&n.id>0&&(t.created=new Date(n.created+"Z"),t.payout=parseFloat(n.pending_payout_value),t.title=n.title,t.author=n.author,t.permlink=n.permlink,t.curation_reward=(Math.sqrt(.25*(t.payout+1))-Math.sqrt(.25*t.payout))*Math.sqrt(.25*(t.payout+1+t.vote_value)),D&&(t.voted=null!=n.active_votes.find(function(t){return t.voter==D.name}))),++m>=e.length&&(e.sort(function(t,e){return parseFloat(e.curation_reward)-parseFloat(t.curation_reward)}),function(t){var e=$("#front_runner_table tbody");e.empty(),t.forEach(function(t){if(t.title){var a=$(document.createElement("tr")),n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com/@"+t.author),o.attr("target","_blank"),o.text("@"+t.author),n.append(o),a.append(n);var n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href",t.memo),o.attr("target","_blank"),o.text(t.title.length>40?t.title.substr(0,40)+"...":t.title),n.append(o),a.append(n);var n=$(document.createElement("td"));n.text("$"+t.payout.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+parseFloat(t.amount).formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+t.vote_value.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));if(n.text((100*(t.curation_reward-1)).formatMoney()+"%"),n.css("text-align","right"),a.append(n),n=$(document.createElement("td")),t.voted)n.text("Voted");else{var o=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-thumbs-up mr5"></i>Upvote</button>');o.click(function(e){D?(n.empty(),n.text("Voting..."),sc2.vote(D.name,t.author,t.permlink,1e4,function(t,e){console.log(t,e),e&&!t?n.text("Success!"):(n.empty(),n.append(o))})):window.location.href=sc2.getLoginURL()}),n.append(o)}n.css("text-align","center"),a.append(n),e.append(a)}})}(e))})})}var f=1,g=.75,v=0,b="USD",h=[],E=[],w=[];$.get("https://steembottracker.com/bidbots.json",function(t){(h=t).sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),h.forEach(function(t){E.push(t.name),$("#bot_list").append('<option value="'+t.name+'">'+t.name+"</option>")})}),$.get("https://steembottracker.com/otherbots.json",function(t){w=t});try{Notification&&"granted"!==Notification.permission&&Notification.requestPermission()}catch(t){}t(),setInterval(t,3e4);var y=!1,x=!0,S=null;setTimeout(a,5e3),setTimeout(e,5e3),setInterval(updateTimers,1e3),$("#curation_option").on("change",function(){g=this.checked?.75:1,r()}),localStorage.hasOwnProperty("currency_list")?($("#currency_list").val(localStorage.getItem("currency_list")),b=localStorage.getItem("currency_list")):localStorage.setItem("currency_list","USD"),$("#currency_list").change(function(){b=$("#currency_list").val(),localStorage.setItem("currency_list",b),r()}),$("#min_vote_slider").slider(),$("#bid_details_account_name").on("change",function(t){localStorage.setItem("bid_details_account_name",$("#bid_details_account_name").val()),m()}),localStorage.hasOwnProperty("min_vote_slider")?($("#min_vote_slider").slider("setValue",localStorage.getItem("min_vote_slider")),v=localStorage.getItem("min_vote_slider")):localStorage.setItem("min_vote_slider",0),$("#min_vote_slider").on("slide",function(t){t.value!=v&&(v=t.value,localStorage.setItem("min_vote_slider",t.value),r())}),$("#calculate_vote").click(function(){var t=null,e=$("#bot_list").val();h.forEach(function(a){a.name!=e||(t=a)});var a=$("#calc_currency").val(),n=parseFloat($("#bid_amount").val()),o=n/(n+t.total)*t.vote_usd,r=n/(n+t.total)*t.vote/2,i=n/(n+t.total)*t.vote/2/steem_price,s="SBD"==a?n*sbd_price:n*steem_price;return $("#bid_value").text("$"+s.formatMoney()),$("#vote_value").text("$"+o.formatMoney()+" = "+r.formatMoney()+" SBD + "+i.formatMoney()+" STEEM"),$("#vote_value_net").text("$"+(.75*o).formatMoney()+" = "+(.75*r).formatMoney()+" SBD + "+(.75*i).formatMoney()+" STEEM"),$("#vote_value").css("color",o>=s?"#008800":"#FF0000"),$("#vote_value_net").css("color",.75*o>=s?"#008800":"#FF0000"),!1}),setTimeout(function(){$("#disclaimer").modal()},2e3),$("#filter_verified").click(function(){u("verified")}),$("#filter_refund").click(function(){u("refund")}),$("#filter_steem").click(function(){u("steem")}),$("#filter_frontrunner").click(function(){u("frontrunner")}),$("#filter_funding").click(function(){u("funding")});var M={};$("#minnowbooster-submit").click(function(){d({name:"minnowbooster",min_bid:.01,max_post_age:6.3})}),$("#randowhale-submit").click(function(){d({name:"randowhale",min_bid:1,max_post_age:3.5})}),$("#smartsteem-submit").click(function(){d({name:"smartmarket",min_bid:.1,max_post_age:6.3})});var T=getURLParameter("access_token")?getURLParameter("access_token"):localStorage.getItem("access_token");sc2.init({baseURL:"https://v2.steemconnect.com",app:"bottracker.app",accessToken:T,callbackURL:"https://steembottracker.com",scope:["login","vote"]});var D=null;sc2.me(function(t,e){e&&!t?(console.log(e),D=e.account,$("#btn_login").hide(),$("#user_info").show(),$("#login_info").text("@"+D.name),localStorage.setItem("access_token",T)):($("#btn_login").show(),$("#user_info").hide())}),$("#btn_logout").click(function(){localStorage.removeItem("access_token"),window.location.href=window.location.pathname}),$("#btn_bid_history").click(function(){$("#user_bids").modal(),_()}),$("#btn_front_run").click(function(){p(),$("#front_runner_dialog").modal()})});