function getCurrency(e){return e.substr(e.indexOf(" ")+1)}function getURLParameter(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getUsdValue(e){return e.currency?parseFloat(e.amount)*("SBD"==e.currency?sbd_price:steem_price):parseFloat(e.amount)*("SBD"==getCurrency(e.amount)?sbd_price:steem_price)}function toTimer(e){var t=Math.floor(e/HOURS),a=Math.floor(e%HOURS/6e4),n=Math.floor(e%6e4/1e3);return t+":"+padLeft(a,2)+":"+padLeft(n,2)}function padLeft(e,t){var a=(e+"").length;if(a>=t)return e+"";for(var n=a;n<t;n++)e="0"+e;return e}function updateTimers(){for(var e=$(".timer"),t=0;t<e.length;t++){var a=$(e[t]);if(!a.attr("time"))return;var n=parseInt(a.attr("time"));"up"==a.attr("dir")?n+=1e3:n=Math.max(n-1e3,0),a.attr("time",n),a.text(toTimer(n))}}function updateSteemVariables(){steem.api.getRewardFund("post",function(e,t){rewardBalance=parseFloat(t.reward_balance.replace(" STEEM","")),recentClaims=t.recent_claims}),steem.api.getCurrentMedianHistoryPrice(function(e,t){steemPrice=parseFloat(t.base.replace(" SBD",""))/parseFloat(t.quote.replace(" STEEM",""))}),steem.api.getDynamicGlobalProperties(function(e,t){votePowerReserveRate=t.vote_power_reserve_rate,totalVestingFund=parseFloat(t.total_vesting_fund_steem.replace(" STEEM","")),totalVestingShares=parseFloat(t.total_vesting_shares.replace(" VESTS",""));var a=t.total_vesting_fund_steem.replace(" STEEM",""),n=t.total_vesting_shares.replace(" VESTS","");steem_per_mvests=a/n*1e6}),setTimeout(updateSteemVariables,18e4)}function getVotingPower(e){var t=e.voting_power,a=new Date(e.last_vote_time+"Z"),n=(new Date-a)/1e3,o=Math.round(STEEMIT_100_PERCENT*n/STEEMIT_VOTE_REGENERATION_SECONDS);return Math.min(t+o,STEEMIT_100_PERCENT)}function getVoteRShares(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){var n=Math.round(1e6*getVestingShares(t)),o=t.voting_power,r=100*e,s=new Date(t.last_vote_time+"Z"),i=(new Date-s)/1e3,m=Math.round(STEEMIT_100_PERCENT*i/STEEMIT_VOTE_REGENERATION_SECONDS),l=a||Math.min(o+m,STEEMIT_100_PERCENT),c=votePowerReserveRate*STEEMIT_VOTE_REGENERATION_SECONDS/86400,d=Math.round(l*r/STEEMIT_100_PERCENT);d=Math.round((d+c-1)/c);return Math.round(n*d/STEEMIT_100_PERCENT)}}function getVoteValue(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){return getVoteRShares(e,t,a)*rewardBalance/recentClaims*steemPrice}}function timeTilFullPower(e){var t=getVotingPower(e);return(STEEMIT_100_PERCENT-t)*STEEMIT_VOTE_REGENERATION_SECONDS/STEEMIT_100_PERCENT}function getVestingShares(e){return parseFloat(e.vesting_shares.replace(" VESTS",""))+parseFloat(e.received_vesting_shares.replace(" VESTS",""))-parseFloat(e.delegated_vesting_shares.replace(" VESTS",""))}var STEEMIT_100_PERCENT=1e4,STEEMIT_VOTE_REGENERATION_SECONDS=432e3,HOURS=36e5,steem_price=1,sbd_price=1;Number.prototype.formatMoney=function(e,t,a){var n=this,o=(e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,a=void 0==a?",":a,n<0?"-":""),r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(e))),s=(s=r.length)>3?s%3:0;return o+(s?r.substr(0,s)+a:"")+r.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")};var steemPrice,rewardBalance,recentClaims,currentUserAccount,votePowerReserveRate,totalVestingFund,totalVestingShares,steem_per_mvests;$(document).ready(function(){$(".modal.modal-center").on("show.bs.modal",function(e){$(".modal.modal-center").each(function(){0==$(this).hasClass("in")&&$(this).show();var e=$(window).height()-60,t=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return e}}),$(this).find(".modal-body").css({"max-height":function(){return e-(t+a)}}),$(this).find(".modal-dialog").addClass("modal-dialog-center").css({"margin-top":function(){return-$(this).outerHeight()/2},"margin-left":function(){return-$(this).outerWidth()/2}}),0==$(this).hasClass("in")&&$(this).hide()})})}),$(function(){function e(){$.get("https://api.coinmarketcap.com/v1/ticker/steem/",function(e){steem_price=parseFloat(e[0].price_usd),$("#steem_price").text(steem_price.formatMoney())}),$.get("https://api.coinmarketcap.com/v1/ticker/steem-dollars/",function(e){sbd_price=parseFloat(e[0].price_usd),$("#sbd_price").text(sbd_price.formatMoney())})}function t(){steem.api.getAccounts(["smartsteem","randowhale","minnowbooster"],function(e,t){try{var a=t[0],n=$("#smartsteem-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#smartsteem-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#ss_bot_error").css("display","none"),a=t[1];var r=JSON.parse(a.json_metadata);$("#randowhale-desc").text(r.profile.about);var s=r.config,i=$("#randowhale-status");i.text(s.sleep?"Sleeping":"Awake!"),s.sleep?(i.removeClass("label-success"),i.addClass("label-default"),$("#randowhale-submit").attr("disabled","disabled")):(i.removeClass("label-default"),i.addClass("label-success"),$("#randowhale-submit").removeAttr("disabled")),$("#randowhale-fee").text(s.fee_sbd.formatMoney()+" SBD");n=$("#randowhale-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#randowhale-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#rw_bot_error").css("display","none"),a=t[2];n=$("#minnowbooster-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#minnowbooster-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#mb_bot_error").css("display","none")}catch(e){$("#ss_bot_error").css("display","block")}}),w||$.get("https://smartsteem.com/api/general/bot_tracker",function(e){$("#smartsteem-desc").text(e.description),$("#smartsteem-profit").text(e.profit),$("#smartsteem-payment").text(e.payment),$("#smartsteem-daily").text(e.daily_limit),$("#smartsteem-weekly").text(e.weekly_limit),$("#smartsteem-features").text(e.additional_features),$("#smartsteem-howto").empty(),e.how_to.forEach(function(e){$("#smartsteem-howto").append($("<li>"+e+"</li>"))}),w=!0}),$.get("https://www.minnowbooster.net/api/global",function(e){$("#minnowbooster-min").text("$"+e.min_upvote+" SBD")}),$.get("https://www.minnowbooster.net/upvotes.json",function(e){for(var t=0;t<5;t++){var a=e[t];$("#mb-upvote-"+t).html('<a href="http://steemit.com/@'+a.sender_name+'">'+a.sender_name+"</a> received a <strong>$"+parseFloat(a.value).formatMoney()+" upvote for $"+parseFloat(a.sbd).formatMoney()+' SBD</strong> on <a href="'+a.url+'">'+a.url+"</a> at "+new Date(a.created_at).toLocaleDateString()+" "+new Date(a.created_at).toLocaleTimeString())}}),steem.api.getAccounts(["earnmoresteem","shares","siditech","earthnation-bot","resteemr","ebargains","photocontests","steemlike","resteemable","fresteem","red-rose","microbot","hottopic","bumper","echowhale","tipu","randofish","lays","thehumanbot","steemvote","upvotewhale","withsmn","minnowpond","resteembot","originalworks","treeplanter","followforupvotes","steemthat","frontrunner","steemvoter","morwhale","moonbot","drotto","blockgators","superbot"],function(e,t){try{t.sort(function(e,t){return getVoteValue(100,t)-getVoteValue(100,e)});var a=$("#other_table tbody");a.empty(),t.forEach(function(e){var t=$(document.createElement("tr")),n=$('<td><a target="_blank" href="https://steemit.com/@'+e.name+'">@'+e.name+"</a></td>");t.append(n),n=$("<td>$"+getVoteValue(100,e).formatMoney()+"</td>"),t.append(n);var o=JSON.parse(e.json_metadata);n=$("<td>"+(o.profile.about?o.profile.about:"")+"</td>"),t.append(n),n=$("<td>"+(o.profile.website?'<a target="_blank" href="'+o.profile.website+'">'+o.profile.website+"</a>":"")+"</td>"),t.append(n),a.append(t)}),$("#other_bot_error").css("display","none")}catch(e){$("#other_bot_error").css("display","block")}}),setTimeout(t,6e5)}function a(){steem.api.getAccounts(E,function(e,t){try{t.forEach(function(e){var t=getVoteValue(100,e),a=new Date(e.last_vote_time+"Z"),r=h.filter(function(t){return t.name==e.name})[0];if(null!=e.json_metadata&&""!=e.json_metadata){var s=JSON.parse(e.json_metadata);if(s&&s.config){var i=s.config;i.min_bid_sbd&&parseFloat(i.min_bid_sbd)>0&&(r.min_bid=parseFloat(i.min_bid_sbd)),i.min_bid_steem&&parseFloat(i.min_bid_steem)>0&&(r.min_bid_steem=parseFloat(i.min_bid_steem)),i.bid_window&&parseFloat(i.bid_window)>0&&(r.interval=parseFloat(i.bid_window)),i.pre_vote_group_url&&""!=i.pre_vote_group_url&&(r.pre_vote_group_url=i.pre_vote_group_url),void 0!=i.accepts_steem&&(r.accepts_steem=i.accepts_steem),void 0!=i.refunds&&(r.refunds=i.refunds),void 0!=i.comments&&(r.comments=i.comments),void 0!=i.is_disabled&&(r.is_disabled=i.is_disabled),i.api_url&&""!=i.api_url&&(r.api_url=i.api_url),i.max_post_age&&parseFloat(i.max_post_age)>0&&(r.max_post_age=parseFloat(i.max_post_age))}}if(!r.is_disabled)if(r.last_vote_time=a,r.vote=t*r.interval/2.4,r.power=getVotingPower(e)/100,r.last=new Date-a,r.next=1e3*timeTilFullPower(e),r.vote_usd=r.vote/2*sbd_price+r.vote/2,r.api_url)!function(e){$.get(e.api_url,function(t){e.rounds=[],n(e,t.last_round);var a=n(e,t.current_round);e.total=a.total,e.total_usd=a.total_usd,e.bid=(e.vote-f*e.total)/f})}(r);else{var m=20;x&&(m=2e3),steem.api.getAccountHistory(e.name,-1,m,function(t,a){if(!t){r.rounds||(r.rounds=[]);var n=null;0==r.rounds.length?(n={last_vote_time:0,bids:[],total:0,total_usd:0},r.rounds.push(n)):n=r.rounds[r.rounds.length-1],a.forEach(function(t){var a=t[1].op,s=new Date(t[1].timestamp+"Z");if("transfer"==a[0]&&a[1].to==e.name&&s>n.last_vote_time){if(!o(a[1].memo))return;var i=getCurrency(a[1].amount);if(!r.accepts_steem&&"STEEM"==i)return;if(0==n.bids.filter(function(e){return e.id==t[0]}).length){var m=parseFloat(a[1].amount);m>=r.min_bid&&(n.bids.push({id:t[0],data:a[1]}),n.total+=m,n.total_usd+=getUsdValue(a[1]))}}else"vote"==a[0]&&a[1].voter==e.name&&null==(n=r.rounds.filter(function(e){return e.last_vote_time>=s-72e5})[0])&&(n={last_vote_time:s,bids:[],total:0,total_usd:0},r.rounds.push(n))}),r.total=n.total,r.total_usd=n.total_usd,r.bid=(r.vote-f*r.total)/f}})}}),$("#bid_bot_error").css("display","none"),x=!1}catch(e){$("#bid_bot_error").css("display","block")}setTimeout(r,5e3),setTimeout(a,3e4)})}function n(e,t){var a={bids:[],total:0};return null!=t&&void 0!=t||(t=[]),a.total=t.reduce(function(e,t){return e+t.amount},0),a.total_usd=t.reduce(function(e,t){return e+getUsdValue(t)},0),a.bids=t.map(function(e){return{data:{amount:e.amount+" "+e.currency,from:e.sender,memo:"https://steemit.com"+e.url,weight:e.weight}}}),e.rounds.push(a),a}function o(e){return e.lastIndexOf("/")>=0&&e.lastIndexOf("@")>=0}function r(){0!=h.length&&h[0].vote&&($("#bots_table tbody").empty(),h.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),h.forEach(function(e){if(!(e.vote_usd<g)&&e.vote&&e.rounds&&0!=e.rounds.length&&!e.is_disabled&&!(S.verified&&!e.api_url||S.refund&&!e.refunds||S.steem&&!e.accepts_steem||S.frontrunner&&!e.pre_vote_group_url)){var t=(b*e.vote_usd-f*e.total_usd)/sbd_price,a=e.accepts_steem?(b*e.vote_usd-f*e.total_usd)/steem_price:0,n=$(document.createElement("tr")),o=$(document.createElement("td"));(_=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+e.name),_.attr("target","_blank");var r="@"+e.name;if((100==e.power&&e.last>4*HOURS||e.power<90)&&(r+=" (DOWN)"),_.html("<img class='userpic' src='https://steemitimages.com/u/"+e.name+"/avatar'></img>"+r),o.append(_),e.comments){var c=$('<span class="fa fa-comment-o ml5" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows Comments"></span>');o.append(c)}if(e.pre_vote_group_url&&""!=e.pre_vote_group_url){c=$('<a href="'+e.pre_vote_group_url+'" target="_blank">&nbsp;<img src="img/frontrunner.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot has a Pre-Vote Group which will give you additional upvotes - Click for Details"/></a>');o.append(c)}if(e.accepts_steem){c=$('<img src="img/steem.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot accepts STEEM bids!" />');o.append(c)}if(e.refunds){c=$('<img src="img/refund.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot automatically refunds invalid bids!" />');o.append(c)}if(e.api_url){var d=$('<img src="img/verified.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot provides a bid API so the data shown here is guaranteed to be accurate!" />');o.append(d)}n.append(o),(o=$(document.createElement("td"))).text(s(e)),n.append(o);var u="";e.accepts_steem&&(u=e.min_bid_steem&&e.min_bid_steem!=e.min_bid?" or "+e.min_bid_steem.formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>':' or <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>'),(o=$(document.createElement("td"))).html(e.min_bid.formatMoney()+" SBD"+u),n.append(o),(o=$(document.createElement("td"))).text(e.max_post_age?e.max_post_age+" days":"unknown"),n.append(o),(o=$(document.createElement("td"))).text(function(e){switch(v){case"SBD":return(e.total_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.total_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.total_usd.formatMoney();case"POST REWARDS":return"$"+(e.total_usd/e.vote_usd*e.vote).formatMoney()}}(e)),n.append(o),o=$(document.createElement("td")),e.accepts_steem?o.html(Math.max(a,0).formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/> or '+Math.max(t,0).formatMoney()+" SBD"):o.text(Math.max(t,0).formatMoney()+" SBD"),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("dir","up"),o.attr("time",e.last),o.text(toTimer(e.last)),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("time",e.next),o.text(toTimer(e.next)),n.append(o),o=$(document.createElement("td"));(_=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-eye mr5"></i>Details</button>')).click(function(t){!function(e){$("#bid_details_bot").text(e.name);var t=$("#bid_details_table_cur tbody");t.empty();var a=$("#bid_details_table_last tbody");if(a.empty(),e.rounds&&e.rounds.length>0){var n=e.rounds[e.rounds.length-1];m(t,e,n),$("#cur_round_vote").text(s(e)+" ("+e.interval/2.4*100+"%)"),$("#cur_round_bids").text(i(n,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+i(n,"STEEM").formatMoney()+" STEEM":"")),$("#cur_round_value").text("$"+e.total_usd.formatMoney()),$("#cur_round_roi").text((100*(e.vote_usd*b/n.total_usd-1)).formatMoney()+"% (After Curation)")}if(e.rounds&&e.rounds.length>1){var n=e.rounds[e.rounds.length-2];m(a,e,n),$("#last_round_vote").text(s(e)+" ("+e.interval/2.4*100+"%)"),$("#last_round_bids").text(i(n,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+i(n,"STEEM").formatMoney()+" STEEM":"")),$("#last_round_value").text("$"+n.total_usd.formatMoney()),$("#last_round_roi").text((100*(e.vote_usd*b/n.total_usd-1)).formatMoney()+"% (After Curation)")}$("#cur_round_show").click(function(e){$("#cur_round").show(),$("#cur_round_show").parent().addClass("active"),$("#last_round").hide(),$("#last_round_show").parent().removeClass("active")}),$("#last_round_show").click(function(e){$("#cur_round").hide(),$("#cur_round_show").parent().removeClass("active"),$("#last_round").show(),$("#last_round_show").parent().addClass("active")}),$("#bid_details").modal()}(e)}),o.append(_),n.append(o),o=$(document.createElement("td"));var _;(_=$('<button type="button" class="btn btn-warning btn-xs"><i class="fa fa-upload mr5"></i>Send Bid</button>')).click(function(t){l(e)}),o.append(_),n.append(o),(t>0||a>0)&&e.next<.16*HOURS&&e.last>.5*HOURS?(n.addClass("green-bg"),e.notif||(!function(e,t){try{"granted"!==Notification.permission?Notification.requestPermission():new Notification("Profitable Bidding Opportunity!",{icon:"https://i.imgur.com/SEm0LBl.jpg",body:"@"+e+" is currently showing a profitable bidding opportunity! Max profitable bid is $"+t.formatMoney()+" SBD."})}catch(e){}}(e.name,t),e.notif=!0)):e.notif=!1,(100==e.power&&e.last>4*HOURS||e.power<90)&&n.addClass("red-light-bg"),$("#bots_table tbody").append(n),$('[data-toggle="tooltip"]').tooltip()}}))}function s(e){switch(v){case"SBD":return(e.vote_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.vote_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.vote_usd.formatMoney();case"POST REWARDS":return"$"+e.vote.formatMoney()}}function i(e,t){return e.bids.reduce(function(e,a){return getCurrency(a.data.amount)==t?e+parseFloat(a.data.amount):e},0)}function m(e,t,a){a.bids.forEach(function(n){var o=parseFloat(n.data.amount),r=getUsdValue(n.data),i=getCurrency(n.data.amount),m=$(document.createElement("tr")),l=$(document.createElement("td"));if((_=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+n.data.from),_.attr("target","_blank"),_.text("@"+n.data.from),n.invalid){var c=$('<span class="fa fa-warning mr5 color-white" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Invalid Post"></span>&nbsp;');l.append(c),m.addClass("red-light-bg")}l.append(_),m.append(l);(l=$(document.createElement("td"))).text(o.formatMoney()+" "+i),l.css("text-align","right"),m.append(l);(l=$(document.createElement("td"))).text("$"+("SBD"==i?o*sbd_price:o*steem_price).formatMoney()),l.css("text-align","right"),m.append(l);(l=$(document.createElement("td"))).text((r/a.total_usd*100).formatMoney()+"%"),l.css("text-align","right"),m.append(l);var d=(r/a.total_usd*parseFloat(s(t).replace(/[$,]/g,""))).formatMoney();d="SBD"==v||"STEEM"==v?d+" "+v:"$"+d;(l=$(document.createElement("td"))).text(d),l.css("text-align","right"),m.append(l);l=$(document.createElement("td"));var u=$(document.createElement("div"));u.css("width","250px"),u.css("overflow","hidden"),u.css("height","23px");var _;(_=$(document.createElement("a"))).attr("href",n.data.memo),_.attr("target","_blank"),_.text(n.data.memo),u.append(_),l.append(u),m.append(l),e.append(m)})}function l(e){$("#bid_details_dialog_bot_name").text(e.name),$("#bid_details_error").hide(),$("#bid_details_btn_submit").click(c),$("#bid_details_post_url").val(""),$("#bid_details_bid_amount").val(e.min_bid),$("#bid_details_bid_amount").attr("min",e.min_bid),(y=$("#bid_details_dialog").modal()).off("hidden.bs.modal"),y.bot=e;var t=T?T.name:localStorage.getItem("bid_details_account_name");t&&($("#bid_details_account_name").val(t),d())}function c(){var e=$("#bid_details_dialog_bot_name").text(),t=$("#bid_details_account_name").val(),a=$("#bid_details_bid_amount").val(),n=$("#bid_details_bid_currency").val(),o=$("#bid_details_post_url").val();!function(e,t,a,n,o){if("STEEM"!=n||e.accepts_steem)if("STEEM"==n&&parseFloat(a)<e.min_bid_steem)o("Bid is below the minimum, please bid "+e.min_bid_steem+" STEEM or more!");else if("SBD"==n&&parseFloat(a)<e.min_bid)o("Bid is below the minimum, please bid "+e.min_bid+" SBD or more!");else{var r=t.substr(t.lastIndexOf("/")+1),s=t.substring(t.lastIndexOf("@")+1,t.lastIndexOf("/"));steem.api.getContent(s,r,function(t,a){if(!t&&a&&a.id>0){var n=new Date(a.created+"Z"),r=a.active_votes.filter(function(t){return t.voter==e.name});r.length>0&&new Date-new Date(r[0].time+"Z")>12e5?o("This bot has already voted on this post!"):new Date-n>=24*e.max_post_age*60*60*1e3?o("This post is past the max age accepted by this bot!"):o(null)}else o("There was an error loading this post, please check the URL.")})}else o("This bot does not accept STEEM bids!")}(y.bot,o,a,n,function(r){r?($("#bid_details_error").html("<b>Error:</b> "+r),$("#bid_details_error").show()):(y.on("hidden.bs.modal",function(r){$("#bid_dialog_bot_name").text(e),$("#bid_dialog_frame").attr("src","https://v2.steemconnect.com/sign/transfer?from="+t+"&to="+e+"&amount="+a+" "+n+"&memo="+o),y=$("#bid_dialog").modal()}),y.modal("hide"))})}function d(){var e=$("#bid_details_account_name").val(),t=$("#bid_details_recent_posts"),a=(new Date).getTime()-24*(y.bot.max_post_age?y.bot.max_post_age:6)*60*60*1e3;steem.api.getDiscussionsByAuthorBeforeDate(e,null,(new Date).toISOString().split(".")[0],5,function(e,n){var o=n.filter(function(e){return new Date(e.created).getTime()>a});o.length>0?t.empty():t.html("None Found"),o.forEach(function(e){var a=e.title.length>25?e.title.substring(0,22)+"...":e.title,n=$('<button type="button" class="btn btn-info btn-xs" style="margin: 0 5px;">'+a+"</button>");t.append(n),n.click(function(){$("#bid_details_post_url").val("https://steemit.com"+e.url)})})})}function u(e){S[e]=!S[e],$("#filter_"+e).css("border",S[e]?"2px solid green":"none"),r()}function _(){steem.api.getAccountHistory(T.name,-1,1e3,function(e,t){for(var a=[],n=0,r=0;r<t.length;r++){var s=t[r][1].op,i=s[1];if("transfer"==s[0]&&E.indexOf(i.to)>=0){if(!o(i.memo))continue;a.push(i),function(e,t){var a=e.memo.substr(e.memo.lastIndexOf("/")+1),n=e.memo.substring(e.memo.lastIndexOf("@")+1,e.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){if(!a&&n&&n.id>0){var o=n.active_votes.find(function(t){return t.voter==e.to});o&&(e.vote_rshares=o.rshares,e.vote_percent=o.percent),e.title=n.title}else console.log(a);t&&t()})}(i,function(){++n>=a.length&&(console.log(a),function(e){var t=$("#user_bids_table tbody");t.empty(),$("#user_bids_name").text(T.name),e.reverse(),e.forEach(function(e){if(e.title){var a=parseFloat(e.amount),n=getUsdValue(e),o=getCurrency(e.amount),r=$(document.createElement("tr")),s=$(document.createElement("td")),i=$(document.createElement("a"));i.attr("href",e.memo),i.attr("target","_blank"),i.text(e.title.length>30?e.title.substr(0,30)+"...":e.title),s.append(i),r.append(s);var s=$(document.createElement("td")),i=$(document.createElement("a"));i.attr("href","https://steemit.com/@"+e.to),i.attr("target","_blank"),i.text("@"+e.to),s.append(i),r.append(s);var s=$(document.createElement("td"));s.text(a.formatMoney()+" "+o+(e.refunded?" (refunded)":"")),s.css("text-align","right"),r.append(s);var s=$(document.createElement("td"));s.text("$"+n.formatMoney()),s.css("text-align","right"),r.append(s);var s=$(document.createElement("td"));s.text(e.refunded||!e.vote_rshares?"--":(e.vote_percent/100).formatMoney()+"%"),s.css("text-align","right"),r.append(s);var m=e.vote_rshares*rewardBalance/recentClaims*steemPrice,s=$(document.createElement("td"));s.text(e.refunded||!e.vote_rshares?"--":"$"+m.formatMoney()),s.css("text-align","right"),r.append(s);var s=$(document.createElement("td"));s.text(e.refunded||!e.vote_rshares?"--":"$"+(m/2*sbd_price+m/2).formatMoney()),s.css("text-align","right"),r.append(s);var s=$(document.createElement("td"));s.text(e.refunded||!e.vote_rshares?"--":(100*((m/2*sbd_price+m/2)/n-1)).formatMoney()+"%"),s.css("text-align","right"),r.append(s),t.append(r)}})}(a))})}else if("transfer"==s[0]&&E.indexOf(s[1].from)>=0){(i=a.find(function(e){return e.to==s[1].from&&e.amount==s[1].amount}))&&(i.refunded=!0)}}})}function p(){for(var e=h.filter(function(e){return e.vote>=100}),t=[],a=e.length,n=0;n<a;n++)for(var o=e[n],r=o.rounds[o.rounds.length-1].bids.filter(function(e){return parseFloat(e.data.amount)>=10}),s=0;s<r.length;s++){var i=r[s],m=t.find(function(e){return e.memo==i.data.memo}),l=getUsdValue(i.data),c=o.vote*(l/(o.vote_usd*b));m?(m.currency||(m.currency=getCurrency(m.amount)),m.amount=parseFloat(m.amount)+parseFloat(i.data.amount),m.bots.push(o.name),m.vote_value+=c):(i.data.bots=[o.name],i.data.vote_value=c,t.push(i.data))}var d=0;t.forEach(function(e){var a=e.memo.substr(e.memo.lastIndexOf("/")+1),n=e.memo.substring(e.memo.lastIndexOf("@")+1,e.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){!a&&n&&n.id>0&&(e.created=new Date(n.created+"Z"),e.payout=parseFloat(n.pending_payout_value),e.title=n.title,e.author=n.author,e.permlink=n.permlink,e.curation_reward=(Math.sqrt(.25*(e.payout+1))-Math.sqrt(.25*e.payout))*Math.sqrt(.25*(e.payout+1+e.vote_value)),T&&(e.voted=null!=n.active_votes.find(function(e){return e.voter==T.name}))),++d>=t.length&&(t.sort(function(e,t){return parseFloat(t.curation_reward)-parseFloat(e.curation_reward)}),function(e){var t=$("#front_runner_table tbody");t.empty(),e.forEach(function(e){if(e.title){var a=$(document.createElement("tr")),n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com/@"+e.author),o.attr("target","_blank"),o.text("@"+e.author),n.append(o),a.append(n);var n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href",e.memo),o.attr("target","_blank"),o.text(e.title.length>40?e.title.substr(0,40)+"...":e.title),n.append(o),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.payout.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+parseFloat(e.amount).formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.vote_value.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));if(n.text((100*(e.curation_reward-1)).formatMoney()+"%"),n.css("text-align","right"),a.append(n),n=$(document.createElement("td")),e.voted)n.text("Voted");else{var o=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-thumbs-up mr5"></i>Upvote</button>');o.click(function(t){T?(n.empty(),n.text("Voting..."),sc2.vote(T.name,e.author,e.permlink,1e4,function(e,t){console.log(e,t),t&&!e?n.text("Success!"):(n.empty(),n.append(o))})):window.location.href=sc2.getLoginURL()}),n.append(o)}n.css("text-align","center"),a.append(n),t.append(a)}})}(t))})})}var f=1,b=.75,g=0,v="USD",h=[{name:"booster",interval:1.2,accepts_steem:!0,comments:!0,max_post_age:5.5,pre_vote_group_url:"https://steemit.com/@frontrunner",min_bid:.1},{name:"buildawhale",interval:2.4,accepts_steem:!1,comments:!0,max_post_age:6.33,pre_vote_group_url:"https://steemit.com/buildawhale/@buildawhale/announcing-the-buildawhale-prevote-club",min_bid:1},{name:"boomerang",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05},{name:"minnowhelper",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1},{name:"discordia",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05},{name:"lovejuice",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05},{name:"sneaky-ninja",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05,max_post_age:6},{name:"appreciator",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.05,max_post_age:6},{name:"pushup",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05,max_post_age:6},{name:"aksdwi",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.1,max_bid:5},{name:"msp-bidbot",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1,max_post_age:6},{name:"kittybot",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.05},{name:"upmyvote",interval:2.4,accepts_steem:!1,comments:!1,min_bid:1,max_post_age:6.33},{name:"upme",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1,refunds:!0,max_post_age:6},{name:"postpromoter",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1,refunds:!0,max_post_age:6},{name:"mrswhale",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.1,min_bid_steem:.5,is_disabled:!0},{name:"hellowhale",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.05},{name:"moneymatchgaming",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.05},{name:"votebuster",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.01,max_post_age:6},{name:"levitation",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.1},{name:"upgoater",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0,max_post_age:6},{name:"allaz",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.1,refunds:!0,max_post_age:6},{name:"jerrybanfield",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0,max_post_age:6},{name:"smartsteem",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0},{name:"upyou",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1,refunds:!0,max_post_age:6},{name:"yourwhale",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.1,refunds:!0},{name:"mercurybot",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0,max_post_age:6},{name:"upmewhale",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0,max_post_age:6},{name:"sleeplesswhale",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.1,refunds:!1},{name:"minnowvotes",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0},{name:"steembloggers",interval:2.4,accepts_steem:!0,comments:!0,min_bid:.1,refunds:!0},{name:"adriatik",interval:2.4,accepts_steem:!0,comments:!0,min_bid:.1,refunds:!0,max_post_age:6},{name:"ipromote",interval:2.4,accepts_steem:!1,comments:!0,min_bid:.5,refunds:!0,max_post_age:5},{name:"seakraken",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.5,refunds:!0,max_post_age:6},{name:"voterunner",interval:2.4,accepts_steem:!1,comments:!1,min_bid:.5,refunds:!0,max_post_age:6},{name:"bid4joy",interval:2.4,accepts_steem:!0,comments:!1,min_bid:.1,refunds:!0,max_post_age:3.5}],E=[];h.forEach(function(e){E.push(e.name),$("#bot_list").append('<option value="'+e.name+'">'+e.name+"</option>")});try{Notification&&"granted"!==Notification.permission&&Notification.requestPermission()}catch(e){}e(),setInterval(e,3e4);var w=!1,x=!0,y=null;setTimeout(a,5e3),setTimeout(t,5e3),setInterval(updateTimers,1e3),$("#curation_option").on("change",function(){b=this.checked?.75:1,r()}),localStorage.hasOwnProperty("currency_list")?($("#currency_list").val(localStorage.getItem("currency_list")),v=localStorage.getItem("currency_list")):localStorage.setItem("currency_list","USD"),$("#currency_list").change(function(){v=$("#currency_list").val(),localStorage.setItem("currency_list",v),r()}),$("#min_vote_slider").slider(),$("#bid_details_account_name").on("change",function(e){localStorage.setItem("bid_details_account_name",$("#bid_details_account_name").val()),d()}),localStorage.hasOwnProperty("min_vote_slider")?($("#min_vote_slider").slider("setValue",localStorage.getItem("min_vote_slider")),g=localStorage.getItem("min_vote_slider")):localStorage.setItem("min_vote_slider",0),$("#min_vote_slider").on("slide",function(e){e.value!=g&&(g=e.value,localStorage.setItem("min_vote_slider",e.value),r())}),$("#calculate_vote").click(function(){var e=null,t=$("#bot_list").val();h.forEach(function(a){a.name!=t||(e=a)});var a=$("#calc_currency").val(),n=parseFloat($("#bid_amount").val()),o=n/(n+e.total)*e.vote_usd,r=n/(n+e.total)*e.vote/2,s=n/(n+e.total)*e.vote/2/steem_price,i="SBD"==a?n*sbd_price:n*steem_price;return $("#bid_value").text("$"+i.formatMoney()),$("#vote_value").text("$"+o.formatMoney()+" = "+r.formatMoney()+" SBD + "+s.formatMoney()+" STEEM"),$("#vote_value_net").text("$"+(.75*o).formatMoney()+" = "+(.75*r).formatMoney()+" SBD + "+(.75*s).formatMoney()+" STEEM"),$("#vote_value").css("color",o>=i?"#008800":"#FF0000"),$("#vote_value_net").css("color",.75*o>=i?"#008800":"#FF0000"),!1}),setTimeout(function(){$("#disclaimer").modal()},2e3),$("#filter_verified").click(function(){u("verified")}),$("#filter_refund").click(function(){u("refund")}),$("#filter_steem").click(function(){u("steem")}),$("#filter_frontrunner").click(function(){u("frontrunner")});var S={};$("#minnowbooster-submit").click(function(){l({name:"minnowbooster",min_bid:.01,max_post_age:6.3})}),$("#randowhale-submit").click(function(){l({name:"randowhale",min_bid:1,max_post_age:3.5})}),$("#smartsteem-submit").click(function(){l({name:"smartmarket",min_bid:.1,max_post_age:6.3})});var M=getURLParameter("access_token")?getURLParameter("access_token"):localStorage.getItem("access_token");sc2.init({baseURL:"https://v2.steemconnect.com",app:"bottracker.app",accessToken:M,callbackURL:"https://steembottracker.com",scope:["login","vote"]});var T=null;sc2.me(function(e,t){t&&!e?(console.log(t),T=t.account,$("#btn_login").hide(),$("#user_info").show(),$("#login_info").text("@"+T.name),localStorage.setItem("access_token",M)):($("#btn_login").show(),$("#user_info").hide())}),$("#btn_logout").click(function(){localStorage.removeItem("access_token"),window.location.href=window.location.pathname}),$("#btn_bid_history").click(function(){$("#user_bids").modal(),_()}),$("#btn_front_run").click(function(){p(),$("#front_runner_dialog").modal()})});