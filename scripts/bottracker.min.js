function getCurrency(e){return e.substr(e.indexOf(" ")+1)}function getURLParameter(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getUsdValue(e){return e.currency?parseFloat(e.amount)*("SBD"==e.currency?sbd_price:steem_price):parseFloat(e.amount)*("SBD"==getCurrency(e.amount)?sbd_price:steem_price)}function toTimer(e){var t=Math.floor(e/HOURS),a=Math.floor(e%HOURS/6e4),n=Math.floor(e%6e4/1e3);return t+":"+padLeft(a,2)+":"+padLeft(n,2)}function padLeft(e,t){var a=(e+"").length;if(a>=t)return e+"";for(var n=a;n<t;n++)e="0"+e;return e}function updateTimers(){for(var e=$(".timer"),t=0;t<e.length;t++){var a=$(e[t]);if(!a.attr("time"))return;var n=parseInt(a.attr("time"));"up"==a.attr("dir")?n+=1e3:n=Math.max(n-1e3,0),a.attr("time",n),a.text(toTimer(n))}}function updateSteemVariables(e){steem.api.getRewardFund("post",function(t,a){rewardBalance=parseFloat(a.reward_balance.replace(" STEEM","")),recentClaims=a.recent_claims,steem.api.getCurrentMedianHistoryPrice(function(t,a){steemPrice=parseFloat(a.base.replace(" SBD",""))/parseFloat(a.quote.replace(" STEEM","")),steem.api.getDynamicGlobalProperties(function(t,a){votePowerReserveRate=a.vote_power_reserve_rate,totalVestingFund=parseFloat(a.total_vesting_fund_steem.replace(" STEEM","")),totalVestingShares=parseFloat(a.total_vesting_shares.replace(" VESTS",""));var n=a.total_vesting_fund_steem.replace(" STEEM",""),o=a.total_vesting_shares.replace(" VESTS","");steem_per_mvests=n/o*1e6,e&&e()})})}),setTimeout(updateSteemVariables,6e5)}function getVotingPower(e){var t=e.voting_power,a=new Date(e.last_vote_time+"Z"),n=(new Date-a)/1e3,o=Math.round(STEEMIT_100_PERCENT*n/STEEMIT_VOTE_REGENERATION_SECONDS);return Math.min(t+o,STEEMIT_100_PERCENT)}function getVoteRShares(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){var n=Math.round(1e6*getVestingShares(t)),o=t.voting_power,r=100*e,i=new Date(t.last_vote_time+"Z"),s=(new Date-i)/1e3,l=Math.round(STEEMIT_100_PERCENT*s/STEEMIT_VOTE_REGENERATION_SECONDS),c=a||Math.min(o+l,STEEMIT_100_PERCENT),d=votePowerReserveRate*STEEMIT_VOTE_REGENERATION_SECONDS/86400,m=Math.round(c*r/STEEMIT_100_PERCENT);m=Math.round((m+d-1)/d);return Math.round(n*m/STEEMIT_100_PERCENT)}}function getVoteValue(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){return getVoteRShares(e,t,a)*rewardBalance/recentClaims*steemPrice}}function timeTilFullPower(e){var t=getVotingPower(e);return(STEEMIT_100_PERCENT-t)*STEEMIT_VOTE_REGENERATION_SECONDS/STEEMIT_100_PERCENT}function getVestingShares(e){return parseFloat(e.vesting_shares.replace(" VESTS",""))+parseFloat(e.received_vesting_shares.replace(" VESTS",""))-parseFloat(e.delegated_vesting_shares.replace(" VESTS",""))}var STEEMIT_100_PERCENT=1e4,STEEMIT_VOTE_REGENERATION_SECONDS=432e3,HOURS=36e5,steem_price=1,sbd_price=1;Number.prototype.formatMoney=function(e,t,a){var n=this,o=(e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,a=void 0==a?",":a,n<0?"-":""),r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(e))),i=(i=r.length)>3?i%3:0;return o+(i?r.substr(0,i)+a:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")},$(document).ready(function(){$(".modal.modal-center").on("show.bs.modal",function(e){$(".modal.modal-center").each(function(){0==$(this).hasClass("in")&&$(this).show();var e=$(window).height()-60,t=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return e}}),$(this).find(".modal-body").css({"max-height":function(){return e-(t+a)}}),$(this).find(".modal-dialog").addClass("modal-dialog-center").css({"margin-top":function(){return-$(this).outerHeight()/2},"margin-left":function(){return-$(this).outerWidth()/2}}),0==$(this).hasClass("in")&&$(this).hide()})})});var steemPrice,rewardBalance,recentClaims,currentUserAccount,votePowerReserveRate,totalVestingFund,totalVestingShares,steem_per_mvests;$(function(){function e(){$.get("https://api.coinmarketcap.com/v1/ticker/steem/",function(e){steem_price=parseFloat(e[0].price_usd),$("#steem_price").text(steem_price.formatMoney()),$("#steem_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green")}),$.get("https://api.coinmarketcap.com/v1/ticker/steem-dollars/",function(e){sbd_price=parseFloat(e[0].price_usd),$("#sbd_price").text(sbd_price.formatMoney()),$("#sbd_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green")})}function t(){$.get(v+"/other_bots",function(e){e.sort(function(e,t){return t.vote_value-e.vote_value});var t=$("#other_table tbody");t.empty();for(var a=0;a<e.length;a++){var n=e[a],o=$(document.createElement("tr")),r=$('<td><a target="_blank" href="https://steemit.com/@'+n.name+'">@'+n.name+"</a></td>");o.append(r),r=$("<td>$"+n.vote_value.toFixed(2)+"</td>"),o.append(r),r=$("<td>"+(n.profile.about?n.profile.about:"")+"</td>"),o.append(r),r=$("<td>"+(n.profile.website?'<a target="_blank" href="'+n.profile.website+'">'+n.profile.website+"</a>":"")+"</td>"),o.append(r),t.append(o)}})}function a(){$.get(v+"/bid_bots",function(e){e.map(function(e){return e.name}).sort().forEach(function(e){$("#bot_list").append('<option value="'+e+'">'+e+"</option>")}),f=e,o()})}function n(){steem.api.getAccounts(["smartsteem","randowhale","minnowbooster"],function(e,t){try{var a=t[0],n=$("#smartsteem-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#smartsteem-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#ss_bot_error").css("display","none"),a=t[1];var r=JSON.parse(a.json_metadata);$("#randowhale-desc").text(r.profile.about);var i=r.config,s=$("#randowhale-status");s.text(i.sleep?"Sleeping":"Awake!"),i.sleep?(s.removeClass("label-success"),s.addClass("label-default"),$("#randowhale-submit").attr("disabled","disabled")):(s.removeClass("label-default"),s.addClass("label-success"),$("#randowhale-submit").removeAttr("disabled")),$("#randowhale-fee").text(i.fee_sbd.formatMoney()+" SBD");n=$("#randowhale-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#randowhale-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#rw_bot_error").css("display","none"),a=t[2];n=$("#minnowbooster-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#minnowbooster-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#mb_bot_error").css("display","none")}catch(e){console.log(e),$("#ss_bot_error").css("display","block")}}),$.get("https://smartsteem.com/api/general/bot_tracker",function(e){$("#smartsteem-desc").text(e.description),$("#smartsteem-profit").text(e.profit),$("#smartsteem-payment").text(e.payment),$("#smartsteem-daily").text(e.daily_limit),$("#smartsteem-weekly").text(e.weekly_limit),$("#smartsteem-features").text(e.additional_features),$("#smartsteem-howto").empty(),e.how_to.forEach(function(e){$("#smartsteem-howto").append($("<li>"+e+"</li>"))})})}function o(){$("#bots_table tbody").empty(),f.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),f.forEach(function(e){if(!(e.vote_usd<p||b.verified&&!e.api_url||b.refund&&!e.refunds||b.steem&&!e.accepts_steem||b.funding&&!e.funding_url||b.nocomment&&(void 0==e.posts_comment||e.posts_comment))){var t=(u*e.vote_usd-m*e.total_usd)/sbd_price,a=e.accepts_steem?(u*e.vote_usd-m*e.total_usd)/steem_price:0,n=$(document.createElement("tr")),o=$(document.createElement("td"));(v=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+e.name),v.attr("target","_blank");var c="@"+e.name;if((100==e.power&&e.last>4*HOURS||e.power<90)&&(c+=" (DOWN)"),v.html("<img class='userpic' src='https://steemitimages.com/u/"+e.name+"/avatar'></img>"+c),o.append(v),e.comments){var d=$('<span class="fa fa-comment-o ml5" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows Comments"></span>');o.append(d)}if(void 0!=e.posts_comment&&!e.posts_comment){d=$('<img src="img/no_comment.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot does not post a comment when it votes on a post." />');o.append(d)}if(e.accepts_steem){d=$('<img src="img/steem.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot accepts STEEM bids!" />');o.append(d)}if(e.refunds){d=$('<img src="img/refund.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot automatically refunds invalid bids!" />');o.append(d)}if(e.funding_url){d=$('<a href="'+e.funding_url+'" target="_blank"><img src="img/funding.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot uses a portion of its earnings to fund other projects and initiatives - Click for Details"/></a>');o.append(d)}n.append(o),(o=$(document.createElement("td"))).text(r(e)),n.append(o);var f="";e.accepts_steem&&(f=e.min_bid_steem&&e.min_bid_steem!=e.min_bid?" or "+e.min_bid_steem.formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>':' or <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>'),(o=$(document.createElement("td"))).html(e.min_bid.formatMoney()+" SBD"+f),n.append(o),(o=$(document.createElement("td"))).text(e.fill_limit?(100*(1-e.fill_limit)).toFixed()+"%":"none"),n.append(o),(o=$(document.createElement("td"))).text((e.min_post_age?e.min_post_age:0)+" mins / "+(e.max_post_age?e.max_post_age+" days":"unknown")),n.append(o),(o=$(document.createElement("td"))).text(isNaN(e.total_usd)?"--":function(e){switch(_){case"SBD":return(e.total_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.total_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.total_usd.formatMoney();case"POST REWARDS":return"$"+(e.total_usd/e.vote_usd*e.vote).formatMoney()}}(e)),n.append(o),o=$(document.createElement("td")),isNaN(e.total_usd)?o.text("unknown"):e.accepts_steem?o.html(Math.max(a,0).formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/> or '+Math.max(t,0).formatMoney()+" SBD"):o.text(Math.max(t,0).formatMoney()+" SBD"),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("dir","up"),o.attr("time",e.last),o.text(toTimer(e.last)),n.append(o),(o=$(document.createElement("td"))).addClass("timer"),o.attr("time",e.next),o.text(toTimer(e.next)),n.append(o),o=$(document.createElement("td"));var g=$('<div class="dropdown"><button class="btn btn-xs btn-warning dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Actions&nbsp;<span class="caret"></span></button></div>'),h=$('<ul class="actions dropdown-menu dropdown-menu-right" aria-labelledby="dLabel"></ul>');if(!isNaN(e.total_usd)){(v=$('<li><a href="javascript:void(0);"><i class="fa fa-eye mr5"></i>Details</a></li>')).click(function(t){!function(e){$("#bid_details_bot").text(e.name),console.log(e),$.get(e.api_url,function(t){var a=$("#bid_details_table_cur tbody");a.empty();var n=$("#bid_details_table_last tbody");n.empty(),t&&t.current_round&&(t.current_round.round_total=t.current_round.reduce(function(e,t){return e+getUsdValue(t)},0),s(a,e,t.current_round),$("#cur_round_vote").text(r(e)+" ("+e.interval/2.4*100+"%)"),$("#cur_round_bids").text(i(t.current_round,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+i(t.current_round,"STEEM").formatMoney()+" STEEM":"")),$("#cur_round_value").text("$"+e.total_usd.formatMoney()),$("#cur_round_roi").text((100*(e.vote_usd*u/t.current_round.round_total-1)).formatMoney()+"% (After Curation)")),t&&t.last_round&&(t.last_round.round_total=t.last_round.reduce(function(e,t){return e+getUsdValue(t)},0),s(n,e,t.last_round),$("#last_round_vote").text(r(e)+" ("+e.interval/2.4*100+"%)"),$("#last_round_bids").text(i(t.last_round,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+i(t.last_round,"STEEM").formatMoney()+" STEEM":"")),$("#last_round_value").text("$"+t.last_round.round_total.formatMoney()),$("#last_round_roi").text((100*(e.vote_usd*u/t.last_round.round_total-1)).formatMoney()+"% (After Curation)")),$("#cur_round_show").click(function(e){$("#cur_round").show(),$("#cur_round_show").parent().addClass("active"),$("#last_round").hide(),$("#last_round_show").parent().removeClass("active")}),$("#last_round_show").click(function(e){$("#cur_round").hide(),$("#cur_round_show").parent().removeClass("active"),$("#last_round").show(),$("#last_round_show").parent().addClass("active")})}),$("#bid_details").modal()}(e)}),h.append(v)}if((v=$('<li><a href="javascript:void(0);"><i class="fa fa-upload mr5"></i>Send Bid</a></li>')).click(function(t){l(e)}),h.append(v),e.rules_url&&""!=e.rules_url){var v=$('<li><a href="'+e.rules_url+'"><i class="fa fa-list-alt mr5"></i>Terms of Service</a></li>');h.append(v)}g.append(h),o.append(g),n.append(o),(t>0||a>0)&&e.next<.16*HOURS&&e.last>.5*HOURS?(n.addClass("green-bg"),y[e.name]||(!function(e,t){try{"granted"!==Notification.permission?Notification.requestPermission():new Notification("Profitable Bidding Opportunity!",{icon:"https://i.imgur.com/SEm0LBl.jpg",body:"@"+e+" is currently showing a profitable bidding opportunity! Max profitable bid is $"+t.formatMoney()+" SBD."})}catch(e){}}(e.name,t),y[e.name]=!0)):y[e.name]=!1,(100==e.power&&e.last>4*HOURS||e.power<90)&&n.addClass("red-light-bg"),$("#bots_table tbody").append(n),$('[data-toggle="tooltip"]').tooltip()}})}function r(e){switch(_){case"SBD":return(e.vote_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.vote_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.vote_usd.formatMoney();case"POST REWARDS":return"$"+e.vote.formatMoney()}}function i(e,t){return e.reduce(function(e,a){return e+(a.currency==t?parseFloat(a.amount):0)},0)}function s(e,t,a){a.forEach(function(n){var o=parseFloat(n.amount),i=getUsdValue(n),s=n.currency,l=$(document.createElement("tr")),c=$(document.createElement("td"));(u=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+n.sender),u.attr("target","_blank"),u.text("@"+n.sender),c.append(u),l.append(c);(c=$(document.createElement("td"))).text(o.formatMoney()+" "+s),c.css("text-align","right"),l.append(c);(c=$(document.createElement("td"))).text("$"+i.formatMoney()),c.css("text-align","right"),l.append(c);(c=$(document.createElement("td"))).text((n.weight?(n.weight/100).formatMoney():(i/a.round_total*100).formatMoney())+"%"),c.css("text-align","right"),l.append(c);var d=((n.weight?n.weight/1e4:i/a.round_total)*parseFloat(r(t).replace(/[$,]/g,""))).formatMoney();d="SBD"==_||"STEEM"==_?d+" "+_:"$"+d;(c=$(document.createElement("td"))).text(d),c.css("text-align","right"),l.append(c);c=$(document.createElement("td"));var m=$(document.createElement("div"));m.css("width","250px"),m.css("overflow","hidden"),m.css("height","23px");var u;(u=$(document.createElement("a"))).attr("href","https://steemit.com"+n.url),u.attr("target","_blank"),u.text(n.url),m.append(u),c.append(m),l.append(c),e.append(l)})}function l(e){$("#bid_details_dialog_bot_name").text(e.name),$("#bid_details_error").hide(),$("#bid_details_btn_submit").click(c),$("#bid_details_post_url").val(""),$("#bid_details_bid_amount").val(e.min_bid),$("#bid_details_bid_amount").attr("min",e.min_bid),(w=$("#bid_details_dialog").modal()).off("hidden.bs.modal"),w.bot=e;var t=E?E.name:localStorage.getItem("bid_details_account_name");t&&($("#bid_details_account_name").val(t),d())}function c(){var e=$("#bid_details_dialog_bot_name").text(),t=$("#bid_details_account_name").val(),a=$("#bid_details_bid_amount").val(),n=$("#bid_details_bid_currency").val(),o=$("#bid_details_post_url").val();!function(e,t,a,n,o){{if("STEEM"==n&&!e.accepts_steem)return void o("This bot does not accept STEEM bids!");if("STEEM"==n&&parseFloat(a)<e.min_bid_steem)return void o("Bid is below the minimum, please bid "+e.min_bid_steem+" STEEM or more!");if("SBD"==n&&parseFloat(a)<e.min_bid)return void o("Bid is below the minimum, please bid "+e.min_bid+" SBD or more!")}var r=t.substr(t.lastIndexOf("/")+1),i=t.substring(t.lastIndexOf("@")+1,t.lastIndexOf("/"));steem.api.getContent(i,r,function(t,a){if(!t&&a&&a.id>0){var n=new Date(a.created+"Z"),r=a.active_votes.filter(function(t){return t.voter==e.name}),i=r.length>0&&new Date-new Date(r[0].time+"Z")>12e5;i?o("This bot has already voted on this post!"):new Date-n>=24*e.max_post_age*60*60*1e3?o("This post is past the max age accepted by this bot!"):o(null)}else o("There was an error loading this post, please check the URL.")})}(w.bot,o,a,n,function(r){r?($("#bid_details_error").html("<b>Error:</b> "+r),$("#bid_details_error").show()):(w.on("hidden.bs.modal",function(r){$("#bid_dialog_bot_name").text(e),$("#bid_dialog_frame").attr("src","https://v2.steemconnect.com/sign/transfer?from="+t+"&to="+e+"&amount="+a+" "+n+"&memo="+o),w=$("#bid_dialog").modal()}),w.modal("hide"))})}function d(){var e=$("#bid_details_account_name").val(),t=$("#bid_details_recent_posts"),a=(new Date).getTime()-24*(w.bot.max_post_age?w.bot.max_post_age:6)*60*60*1e3;steem.api.getDiscussionsByAuthorBeforeDate(e,null,(new Date).toISOString().split(".")[0],5,function(e,n){var o=n.filter(function(e){return new Date(e.created).getTime()>a});o.length>0?t.empty():t.html("None Found"),o.forEach(function(e){var a=e.title.length>25?e.title.substring(0,22)+"...":e.title,n=$('<button type="button" class="btn btn-info btn-xs" style="margin: 0 5px;">'+a+"</button>");t.append(n),n.click(function(){$("#bid_details_post_url").val("https://steemit.com"+e.url)})})})}var m=1,u=.75,p=20,_="USD",f=[],g=[],h=18e5,v="https://steembottracker.net",b={},E=null,w=null,y={};!function(){try{Notification&&"granted"!==Notification.permission&&Notification.requestPermission()}catch(e){}e(),setInterval(e,3e4),t(),setInterval(t,6e5),a(),setInterval(a,3e4),updateSteemVariables(n),setInterval(n,6e5),setInterval(updateTimers,1e3),function(){function e(e){b[e]=!b[e],$("#filter_"+e).css("border",b[e]?"2px solid green":"none"),o()}$("#curation_option").on("change",function(){u=this.checked?.75:1,o()}),localStorage.hasOwnProperty("currency_list")?($("#currency_list").val(localStorage.getItem("currency_list")),_=localStorage.getItem("currency_list")):localStorage.setItem("currency_list","USD"),$("#currency_list").change(function(){_=$("#currency_list").val(),localStorage.setItem("currency_list",_),o()}),$("#min_vote_slider").slider(),$("#bid_details_account_name").on("change",function(e){localStorage.setItem("bid_details_account_name",$("#bid_details_account_name").val()),d()}),localStorage.hasOwnProperty("min_vote_slider")?($("#min_vote_slider").slider("setValue",localStorage.getItem("min_vote_slider")),p=parseFloat(localStorage.getItem("min_vote_slider"))):localStorage.setItem("min_vote_slider",p),$("#min_vote_slider").on("slide",function(e){e.value!=p&&(p=parseFloat(e.value),localStorage.setItem("min_vote_slider",e.value),o())}),$("#calculate_vote").click(function(){var e=null,t=$("#bot_list").val();f.forEach(function(a){a.name!=t||(e=a)});var a=$("#calc_currency").val(),n=parseFloat($("#bid_amount").val()),o="SBD"==a?n*sbd_price:n*steem_price,r=o/(o+e.total_usd)*e.vote_usd,i=o/(o+e.total_usd)*e.vote/2,s=o/(o+e.total_usd)*e.vote/2/steem_price;return $("#bid_value").text("$"+o.formatMoney()),$("#vote_value").text("$"+r.formatMoney()+" = "+i.formatMoney()+" SBD + "+s.formatMoney()+" STEEM"),$("#vote_value_net").text("$"+(.75*r).formatMoney()+" = "+(.75*i).formatMoney()+" SBD + "+(.75*s).formatMoney()+" STEEM"),$("#vote_value").css("color",r>=o?"#008800":"#FF0000"),$("#vote_value_net").css("color",.75*r>=o?"#008800":"#FF0000"),!1}),$("#close_peg_msg").click(function(){$("#peg_msg").hide(),localStorage.setItem("hide_peg_msg",!0)}),localStorage.hasOwnProperty("hide_peg_msg")&&$("#peg_msg").hide(),localStorage.hasOwnProperty("accept_disclaimer")||setTimeout(function(){$("#disclaimer").modal(),localStorage.setItem("accept_disclaimer",!0)},2e3),$("#filter_verified").click(function(){e("verified")}),$("#filter_refund").click(function(){e("refund")}),$("#filter_steem").click(function(){e("steem")}),$("#filter_funding").click(function(){e("funding")}),$("#filter_nocomment").click(function(){e("nocomment")}),$("#minnowbooster-submit").click(function(){l({name:"minnowbooster",min_bid:.01,max_post_age:6.3})}),$("#randowhale-submit").click(function(){l({name:"randowhale",min_bid:1,max_post_age:3.5})}),$("#smartsteem-submit").click(function(){l({name:"smartmarket",min_bid:.1,max_post_age:6.3})});var t=getURLParameter("access_token")?getURLParameter("access_token"):localStorage.getItem("access_token");sc2.init({baseURL:"https://v2.steemconnect.com",app:"bottracker.app",accessToken:t,callbackURL:"https://steembottracker.com",scope:["login","vote"]}),sc2.me(function(e,a){a&&!e?(console.log(a),E=a.account,$("#btn_login").hide(),$("#user_info").show(),$("#login_info").text("@"+E.name),localStorage.setItem("access_token",t)):($("#btn_login").show(),$("#user_info").hide())}),$("#btn_logout").click(function(){localStorage.removeItem("access_token"),window.location.href=window.location.pathname}),$("#btn_bid_history").click(function(){$("#user_bids").modal(),steem.api.getAccountHistory(E.name,-1,1e3,function(e,t){for(var a=[],n=0,o=0;o<t.length;o++){var r=t[o],i=r[1].op,s=i[1];if("transfer"==i[0]&&g.indexOf(s.to)>=0){if(!checkMemo(s.memo))continue;a.push(s),function(e,t){var a=e.memo.substr(e.memo.lastIndexOf("/")+1),n=e.memo.substring(e.memo.lastIndexOf("@")+1,e.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){if(!a&&n&&n.id>0){var o=n.active_votes.find(function(t){return t.voter==e.to});o&&(e.vote_rshares=o.rshares,e.vote_percent=o.percent),e.title=n.title}else console.log(a);t&&t()})}(s,function(){++n>=a.length&&(console.log(a),function(e){var t=$("#user_bids_table tbody");t.empty(),$("#user_bids_name").text(E.name),e.reverse(),e.forEach(function(e){if(e.title){var a=parseFloat(e.amount),n=getUsdValue(e),o=getCurrency(e.amount),r=$(document.createElement("tr")),i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href",e.memo),s.attr("target","_blank"),s.text(e.title.length>30?e.title.substr(0,30)+"...":e.title),i.append(s),r.append(i);var i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href","https://steemit.com/@"+e.to),s.attr("target","_blank"),s.text("@"+e.to),i.append(s),r.append(i);var i=$(document.createElement("td"));i.text(a.formatMoney()+" "+o+(e.refunded?" (refunded)":"")),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text("$"+n.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":(e.vote_percent/100).formatMoney()+"%"),i.css("text-align","right"),r.append(i);var l=e.vote_rshares*rewardBalance/recentClaims*steemPrice,i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":"$"+l.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":"$"+(l/2*sbd_price+l/2).formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":(100*((l/2*sbd_price+l/2)/n-1)).formatMoney()+"%"),i.css("text-align","right"),r.append(i),t.append(r)}})}(a))})}else if("transfer"==i[0]&&g.indexOf(i[1].from)>=0){var s=a.find(function(e){return e.to==i[1].from&&e.amount==i[1].amount});s&&(s.refunded=!0)}}})}),$("#btn_front_run").click(function(){$.get(v+"/posts",function(e){var t=e,a=0;t.forEach(function(e){var n=e.permlink,o=e.author;steem.api.getContent(o,n,function(n,o){if(!n&&o&&o.id>0){e.created=new Date(o.created+"Z"),e.payout=parseFloat(o.pending_payout_value),e.title=o.title,e.author=o.author,e.permlink=o.permlink;var r=Math.min(new Date-new Date(o.created+"Z"),h)/h;e.curation_reward=(Math.sqrt(.25*(e.payout+1))-Math.sqrt(.25*e.payout))*Math.sqrt(.25*(e.payout+1+e.vote_value))*r,E&&(e.voted=null!=o.active_votes.find(function(e){return e.voter==E.name}))}++a>=t.length&&(t.sort(function(e,t){return parseFloat(t.curation_reward)-parseFloat(e.curation_reward)}),function(e){var t=$("#front_runner_table tbody");t.empty(),e.forEach(function(e){if(e.title){var a=$(document.createElement("tr")),n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com/@"+e.author),o.attr("target","_blank"),o.text("@"+e.author),n.append(o),a.append(n);var n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com"+e.url),o.attr("target","_blank"),o.text(e.title.length>40?e.title.substr(0,40)+"...":e.title),n.append(o),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.payout.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+parseFloat(e.amount).formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.vote_value.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));if(n.text("$"+e.curation_reward.formatMoney()+" / $1"),n.css("text-align","right"),a.append(n),n=$(document.createElement("td")),e.voted)n.text("Voted");else{var o=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-thumbs-up mr5"></i>Upvote</button>');o.click(function(t){E?(n.empty(),n.text("Voting..."),sc2.vote(E.name,e.author,e.permlink,1e4,function(e,t){console.log(e,t),t&&!e?n.text("Success!"):(n.empty(),n.append(o))})):window.location.href=sc2.getLoginURL()}),n.append(o)}n.css("text-align","center"),a.append(n),t.append(a)}})}(t))})})}),$("#front_runner_dialog").modal()})}()}()});