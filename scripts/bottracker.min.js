function getCurrency(e){return e.substr(e.indexOf(" ")+1)}function getURLParameter(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getUsdValue(e){return e.currency?parseFloat(e.amount)*("SBD"==e.currency?sbd_price:steem_price):parseFloat(e.amount)*("SBD"==getCurrency(e.amount)?sbd_price:steem_price)}function toTimer(e){var t=Math.floor(e/HOURS),a=Math.floor(e%HOURS/6e4),n=Math.floor(e%6e4/1e3);return t+":"+padLeft(a,2)+":"+padLeft(n,2)}function padLeft(e,t){var a=(e+"").length;if(a>=t)return e+"";for(var n=a;n<t;n++)e="0"+e;return e}function updateTimers(){for(var e=$(".timer"),t=0;t<e.length;t++){var a=$(e[t]);if(!a.attr("time"))return;var n=parseInt(a.attr("time"));"up"==a.attr("dir")?n+=1e3:n=Math.max(n-1e3,0),a.attr("time",n),a.text(toTimer(n))}}function updateSteemVariables(e){steem.api.getRewardFund("post",function(t,a){rewardBalance=parseFloat(a.reward_balance.replace(" STEEM","")),recentClaims=a.recent_claims,steem.api.getCurrentMedianHistoryPrice(function(t,a){steemPrice=parseFloat(a.base.replace(" SBD",""))/parseFloat(a.quote.replace(" STEEM","")),steem.api.getDynamicGlobalProperties(function(t,a){votePowerReserveRate=a.vote_power_reserve_rate,totalVestingFund=parseFloat(a.total_vesting_fund_steem.replace(" STEEM","")),totalVestingShares=parseFloat(a.total_vesting_shares.replace(" VESTS",""));var n=a.total_vesting_fund_steem.replace(" STEEM",""),o=a.total_vesting_shares.replace(" VESTS","");steem_per_mvests=n/o*1e6,e&&e()})})}),setTimeout(updateSteemVariables,6e5)}function getVotingPower(e){var t=e.voting_power,a=new Date(e.last_vote_time+"Z"),n=(new Date-a)/1e3,o=Math.round(STEEMIT_100_PERCENT*n/STEEMIT_VOTE_REGENERATION_SECONDS);return Math.min(t+o,STEEMIT_100_PERCENT)}function getVoteRShares(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){var n=Math.round(1e6*getVestingShares(t)),o=t.voting_power,r=100*e,i=new Date(t.last_vote_time+"Z"),s=(new Date-i)/1e3,l=Math.round(STEEMIT_100_PERCENT*s/STEEMIT_VOTE_REGENERATION_SECONDS),c=a||Math.min(o+l,STEEMIT_100_PERCENT),d=votePowerReserveRate*STEEMIT_VOTE_REGENERATION_SECONDS/86400,m=Math.round(c*r/STEEMIT_100_PERCENT);m=Math.round((m+d-1)/d);return Math.round(n*m/STEEMIT_100_PERCENT)}}function getVoteValue(e,t,a){if(t&&rewardBalance&&recentClaims&&steemPrice&&votePowerReserveRate){return getVoteRShares(e,t,a)*rewardBalance/recentClaims*steemPrice}}function timeTilFullPower(e){var t=getVotingPower(e);return(STEEMIT_100_PERCENT-t)*STEEMIT_VOTE_REGENERATION_SECONDS/STEEMIT_100_PERCENT}function getVestingShares(e){return parseFloat(e.vesting_shares.replace(" VESTS",""))+parseFloat(e.received_vesting_shares.replace(" VESTS",""))-parseFloat(e.delegated_vesting_shares.replace(" VESTS",""))}function popupCenter(e,t,a,n){var o=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,i=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-a/2+o,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+r,l=window.open(e,t,"scrollbars=yes, width="+a+", height="+n+", top="+s+", left="+i);return window.focus&&l.focus(),l}var STEEMIT_100_PERCENT=1e4,STEEMIT_VOTE_REGENERATION_SECONDS=432e3,HOURS=36e5,steem_price=1,sbd_price=1;Number.prototype.formatMoney=function(e,t,a){var n=this,o=(e=isNaN(e=Math.abs(e))?2:e,t=void 0==t?".":t,a=void 0==a?",":a,n<0?"-":""),r=String(parseInt(n=Math.abs(Number(n)||0).toFixed(e))),i=(i=r.length)>3?i%3:0;return o+(i?r.substr(0,i)+a:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?t+Math.abs(n-r).toFixed(e).slice(2):"")},$(document).ready(function(){$(".modal.modal-center").on("show.bs.modal",function(e){$(".modal.modal-center").each(function(){0==$(this).hasClass("in")&&$(this).show();var e=$(window).height()-60,t=$(this).find(".modal-header").outerHeight()||2,a=$(this).find(".modal-footer").outerHeight()||2;$(this).find(".modal-content").css({"max-height":function(){return e}}),$(this).find(".modal-body").css({"max-height":function(){return e-(t+a)}}),$(this).find(".modal-dialog").addClass("modal-dialog-center").css({"margin-top":function(){return-$(this).outerHeight()/2},"margin-left":function(){return-$(this).outerWidth()/2}}),0==$(this).hasClass("in")&&$(this).hide()})})});var steemPrice,rewardBalance,recentClaims,currentUserAccount,votePowerReserveRate,totalVestingFund,totalVestingShares,steem_per_mvests;$(function(){function e(){$.get("https://api.coinmarketcap.com/v1/ticker/steem/",function(e){steem_price=parseFloat(e[0].price_usd),$("#steem_price").text(steem_price.formatMoney()),$("#steem_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green")}),$.get("https://api.coinmarketcap.com/v1/ticker/steem-dollars/",function(e){sbd_price=parseFloat(e[0].price_usd),$("#sbd_price").text(sbd_price.formatMoney()),$("#sbd_price_container").css("color",parseFloat(e[0].percent_change_24h)<0?"red":"green")})}function t(){$.get(b+"/other_bots",function(e){e.sort(function(e,t){return t.vote_value-e.vote_value});var t=$("#other_table tbody");t.empty();for(var a=0;a<e.length;a++){var n=e[a],o=$(document.createElement("tr")),r=$('<td><a target="_blank" href="https://steemit.com/@'+n.name+'">@'+n.name+"</a></td>");o.append(r),r=$("<td>$"+n.vote_value.toFixed(2)+"</td>"),o.append(r),r=$("<td>"+(n.profile.about?n.profile.about:"")+"</td>"),o.append(r),r=$("<td>"+(n.profile.website?'<a target="_blank" href="'+n.profile.website+'">'+n.profile.website+"</a>":"")+"</td>"),o.append(r),t.append(o)}})}function a(){$.get(b+"/bid_bots",function(e){e.map(function(e){return e.name}).sort().forEach(function(e){$("#bot_list").append('<option value="'+e+'">'+e+"</option>")}),g=e,o()})}function n(){steem.api.getAccounts(["smartsteem","randowhale","minnowbooster"],function(e,t){try{var a=t[0],n=$("#smartsteem-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#smartsteem-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#ss_bot_error").css("display","none"),a=t[1];var r=JSON.parse(a.json_metadata);$("#randowhale-desc").text(r.profile.about);var i=r.config,s=$("#randowhale-status");s.text(i.sleep?"Sleeping":"Awake!"),i.sleep?(s.removeClass("label-success"),s.addClass("label-default"),$("#randowhale-submit").attr("disabled","disabled")):(s.removeClass("label-default"),s.addClass("label-success"),$("#randowhale-submit").removeAttr("disabled")),$("#randowhale-fee").text(i.fee_sbd.formatMoney()+" SBD");n=$("#randowhale-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#randowhale-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#rw_bot_error").css("display","none"),a=t[2];n=$("#minnowbooster-progress div"),o=getVotingPower(a)/100;n.attr("aria-valuenow",o),n.css("width",o+"%"),n.text(o+"%"),$("#minnowbooster-vote").text("$"+getVoteValue(100,a).formatMoney()),$("#mb_bot_error").css("display","none")}catch(e){console.log(e),$("#ss_bot_error").css("display","block")}}),$.get("https://smartsteem.com/api/general/bot_tracker",function(e){$("#smartsteem-desc").text(e.description),$("#smartsteem-profit").text(e.profit),$("#smartsteem-payment").text(e.payment),$("#smartsteem-daily").text(e.daily_limit),$("#smartsteem-weekly").text(e.weekly_limit),$("#smartsteem-features").text(e.additional_features),$("#smartsteem-howto").empty(),e.how_to.forEach(function(e){$("#smartsteem-howto").append($("<li>"+e+"</li>"))})})}function o(){$("#bots_table tbody").empty();var e=g.filter(function(e){return S.indexOf(e.name)>=0}),t=g.filter(function(e){return S.indexOf(e.name)<0});if(e.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),t.sort(function(e,t){return(100==e.power&&e.last>3*HOURS||e.last<6e4?999e7:e.next)-(100==t.power&&t.last>3*HOURS||t.last<6e4?999e7:t.next)}),e.length>0){e.forEach(r);var a=$(document.createElement("tr")),n=$(document.createElement("td"));n.attr("colspan","10"),n.html('<hr style="margin: 0;"/>'),a.append(n),$("#bots_table tbody").append(a)}t.forEach(r),$('[data-toggle="tooltip"]').tooltip(),M.length>0&&($("#bots_hidden").text(M.length),$("#unhide_link").show())}function r(e){var t=S.indexOf(e.name)>=0;if(t||!(M.indexOf(e.name)>=0||e.vote_usd<_||E.verified&&!e.api_url||E.refund&&!e.refunds||E.steem&&!e.accepts_steem||E.funding&&!e.funding_url||E.nocomment&&(void 0==e.posts_comment||e.posts_comment))){var a=(p*e.vote_usd-u*e.total_usd)/sbd_price,n=e.accepts_steem?(p*e.vote_usd-u*e.total_usd)/steem_price:0,r=$(document.createElement("tr")),d=$(document.createElement("td"));(x=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+e.name),x.attr("target","_blank");var m="@"+e.name;if((100==e.power&&e.last>4*HOURS||e.power<90)&&(m+=" (DOWN)"),x.html("<img class='userpic' src='https://steemitimages.com/u/"+e.name+"/avatar'></img>"+m),d.append(x),e.comments){var g=$('<span class="fa fa-comment-o ml5" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Allows Comments"></span>');d.append(g)}if(void 0!=e.posts_comment&&!e.posts_comment){g=$('<img src="img/no_comment.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot does not post a comment when it votes on a post." />');d.append(g)}if(e.accepts_steem){g=$('<img src="img/steem.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot accepts STEEM bids!" />');d.append(g)}if(e.refunds){g=$('<img src="img/refund.png" style="width: 20px; margin-left: 5px;" data-toggle="tooltip" data-placement="top" title="This bot automatically refunds invalid bids!" />');d.append(g)}if(e.funding_url){g=$('<a href="'+e.funding_url+'" target="_blank"><img src="img/funding.png" style="width: 20px; margin-left: 5px;" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="This bot uses a portion of its earnings to fund other projects and initiatives - Click for Details"/></a>');d.append(g)}r.append(d),(d=$(document.createElement("td"))).text(i(e)),r.append(d);var h="";e.accepts_steem&&(h=e.min_bid_steem&&e.min_bid_steem!=e.min_bid?" or "+e.min_bid_steem.formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>':' or <img src="img/steem.png" style="width: 17px; vertical-align: top;"/>'),(d=$(document.createElement("td"))).html(e.min_bid.formatMoney()+" SBD"+h),r.append(d),(d=$(document.createElement("td"))).text(e.fill_limit?(100*(1-e.fill_limit)).toFixed()+"%":"none"),r.append(d),(d=$(document.createElement("td"))).text((e.min_post_age?e.min_post_age:0)+" mins / "+(e.max_post_age?e.max_post_age+" days":"unknown")),r.append(d),(d=$(document.createElement("td"))).text(isNaN(e.total_usd)?"--":function(e){switch(f){case"SBD":return(e.total_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.total_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.total_usd.formatMoney();case"POST REWARDS":return"$"+(e.total_usd/e.vote_usd*e.vote).formatMoney()}}(e)),r.append(d),d=$(document.createElement("td")),isNaN(e.total_usd)?d.text("unknown"):e.accepts_steem?d.html(Math.max(n,0).formatMoney()+' <img src="img/steem.png" style="width: 17px; vertical-align: top;"/> or '+Math.max(a,0).formatMoney()+" SBD"):d.text(Math.max(a,0).formatMoney()+" SBD"),r.append(d),(d=$(document.createElement("td"))).addClass("timer"),d.attr("dir","up"),d.attr("time",e.last),d.text(toTimer(e.last)),r.append(d),(d=$(document.createElement("td"))).addClass("timer"),d.attr("time",e.next),d.text(toTimer(e.next)),r.append(d),d=$(document.createElement("td"));var v=$('<div class="dropdown"><button class="btn btn-xs btn-warning dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Actions&nbsp;<span class="caret"></span></button></div>'),w=$('<ul class="actions dropdown-menu dropdown-menu-right" aria-labelledby="dLabel"></ul>');if(!isNaN(e.total_usd)){(x=$('<li><a href="javascript:void(0);"><i class="fa fa-eye mr5"></i>Details</a></li>')).click(function(t){!function(e){$("#bid_details_bot").text(e.name),$("#bid_details_table_cur tbody").empty(),$("#bid_details_table_last tbody").empty(),$("#cur_round_vote").text("Loading..."),$("#cur_round_bids").text("Loading..."),$("#cur_round_value").text("Loading..."),$("#cur_round_roi").text("Loading..."),$("#last_round_vote").text("Loading..."),$("#last_round_bids").text("Loading..."),$("#last_round_value").text("Loading..."),$("#last_round_roi").text("Loading..."),$.get(b+"/bid_bots/"+e.name,function(t){var a=$("#bid_details_table_cur tbody");a.empty();var n=$("#bid_details_table_last tbody");if(n.empty(),t&&t.current_round){t.current_round.round_total=t.current_round.reduce(function(e,t){return e+getUsdValue(t)},0),l(a,e,t.current_round),$("#cur_round_vote").text(i(e)+" ("+e.interval/2.4*100+"%)"),$("#cur_round_bids").text(s(t.current_round,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+s(t.current_round,"STEEM").formatMoney()+" STEEM":"")),$("#cur_round_value").text("$"+e.total_usd.formatMoney());var o=100*(e.vote_usd*p/t.current_round.round_total-1);e.max_roi&&(o=Math.min(e.max_roi,o)),$("#cur_round_roi").text(o.formatMoney()+"% (After Curation"+(e.max_roi?" - Capped)":")"))}if(t&&t.last_round){t.last_round.round_total=t.last_round.reduce(function(e,t){return e+getUsdValue(t)},0),l(n,e,t.last_round),$("#last_round_vote").text(i(e)+" ("+e.interval/2.4*100+"%)"),$("#last_round_bids").text(s(t.last_round,"SBD").formatMoney()+" SBD"+(e.accepts_steem?" & "+s(t.last_round,"STEEM").formatMoney()+" STEEM":"")),$("#last_round_value").text("$"+t.last_round.round_total.formatMoney());var o=100*(e.vote_usd*p/t.last_round.round_total-1);e.max_roi&&(o=Math.min(e.max_roi,o)),$("#last_round_roi").text(o.formatMoney()+"% (After Curation"+(e.max_roi?" - Capped)":")"))}$("#cur_round_show").click(function(e){$("#cur_round").show(),$("#cur_round_show").parent().addClass("active"),$("#last_round").hide(),$("#last_round_show").parent().removeClass("active")}),$("#last_round_show").click(function(e){$("#cur_round").hide(),$("#cur_round_show").parent().removeClass("active"),$("#last_round").show(),$("#last_round_show").parent().addClass("active")})}),$("#bid_details").modal()}(e)}),w.append(x)}if((x=$('<li><a href="javascript:void(0);"><i class="fa fa-upload mr5"></i>Send Bid</a></li>')).click(function(t){c(e)}),w.append(x),t){(x=$('<li><a href="javascript:void(0);"><i class="fa fa-heart mr5" style="color: red;"></i>Un-Favorite</a></li>')).click(function(t){S.splice(S.indexOf(e.name),1),localStorage.setItem("favorites",S.join()),o()}),w.append(x)}else{(x=$('<li><a href="javascript:void(0);"><i class="fa fa-heart mr5" style="color: red;"></i>Favorite</a></li>')).click(function(t){S.push(e.name),localStorage.setItem("favorites",S.join()),o()}),w.append(x)}if(M.indexOf(e.name)>=0){(x=$('<li><a href="javascript:void(0);"><i class="fa fa-remove mr5"></i>Un-Hide</a></li>')).click(function(t){M.splice(M.indexOf(e.name),1),localStorage.setItem("hidden",M.join()),o()}),w.append(x)}else{(x=$('<li><a href="javascript:void(0);"><i class="fa fa-remove mr5"></i>Hide</a></li>')).click(function(t){M.push(e.name),localStorage.setItem("hidden",M.join()),o()}),w.append(x)}if(e.rules_url&&""!=e.rules_url){var x=$('<li><a href="'+e.rules_url+'" target="_blank"><i class="fa fa-list-alt mr5"></i>Terms of Service</a></li>');w.append(x)}v.append(w),d.append(v),r.append(d),(a>0||n>0)&&e.next<.16*HOURS&&e.last>.5*HOURS?(r.addClass("green-bg"),y[e.name]||(!function(e,t){try{"granted"!==Notification.permission?Notification.requestPermission():new Notification("Profitable Bidding Opportunity!",{icon:"https://i.imgur.com/SEm0LBl.jpg",body:"@"+e+" is currently showing a profitable bidding opportunity! Max profitable bid is $"+t.formatMoney()+" SBD."})}catch(e){}}(e.name,a),y[e.name]=!0)):y[e.name]=!1,(100==e.power&&e.last>4*HOURS||e.power<90)&&r.addClass("red-light-bg"),$("#bots_table tbody").append(r)}}function i(e){switch(f){case"SBD":return(e.vote_usd/sbd_price).formatMoney()+" SBD";case"STEEM":return(e.vote_usd/steem_price).formatMoney()+" STEEM";case"USD":return"$"+e.vote_usd.formatMoney();case"POST REWARDS":return"$"+e.vote.formatMoney()}}function s(e,t){return e.reduce(function(e,a){return e+(a.currency==t?parseFloat(a.amount):0)},0)}function l(e,t,a){a.forEach(function(n){var o=parseFloat(n.amount),r=getUsdValue(n),s=n.currency,l=$(document.createElement("tr")),c=$(document.createElement("td"));(u=$(document.createElement("a"))).attr("href","http://www.steemit.com/@"+n.sender),u.attr("target","_blank"),u.text("@"+n.sender),c.append(u),l.append(c);(c=$(document.createElement("td"))).text(o.formatMoney()+" "+s),c.css("text-align","right"),l.append(c);(c=$(document.createElement("td"))).text("$"+r.formatMoney()),c.css("text-align","right"),l.append(c);(c=$(document.createElement("td"))).text((n.weight?(n.weight/100).formatMoney():(r/a.round_total*100).formatMoney())+"%"),c.css("text-align","right"),l.append(c);var d=((n.weight?n.weight/1e4:r/a.round_total)*parseFloat(i(t).replace(/[$,]/g,""))).formatMoney();d="SBD"==f||"STEEM"==f?d+" "+f:"$"+d;(c=$(document.createElement("td"))).text(d),c.css("text-align","right"),l.append(c);c=$(document.createElement("td"));var m=$(document.createElement("div"));m.css("width","250px"),m.css("overflow","hidden"),m.css("height","23px");var u;(u=$(document.createElement("a"))).attr("href","https://steemit.com"+n.url),u.attr("target","_blank"),u.text(n.url),m.append(u),c.append(m),l.append(c),e.append(l)})}function c(e){$("#bid_details_dialog_bot_name").text(e.name),$("#bid_details_error").hide(),$("#bid_details_btn_submit").click(d),$("#bid_details_post_url").val(""),$("#bid_details_bid_amount").val(e.min_bid),$("#bid_details_bid_amount").attr("min",e.min_bid),(x=$("#bid_details_dialog").modal()).off("hidden.bs.modal"),x.bot=e;var t=w?w.name:localStorage.getItem("bid_details_account_name");t&&($("#bid_details_account_name").val(t),m())}function d(){var e=$("#bid_details_dialog_bot_name").text(),t=$("#bid_details_account_name").val(),a=$("#bid_details_bid_amount").val(),n=$("#bid_details_bid_currency").val(),o=$("#bid_details_post_url").val(),r=popupCenter("https://v2.steemconnect.com/sign/transfer?from="+t+"&to="+e+"&amount="+a+" "+n+"&memo="+o,"sc2-pay",500,560);!function(e,t,a,n,o){{if("STEEM"==n&&!e.accepts_steem)return void o("This bot does not accept STEEM bids!");if("STEEM"==n&&parseFloat(a)<e.min_bid_steem)return void o("Bid is below the minimum, please bid "+e.min_bid_steem+" STEEM or more!");if("SBD"==n&&parseFloat(a)<e.min_bid)return void o("Bid is below the minimum, please bid "+e.min_bid+" SBD or more!")}var r=t.substr(t.lastIndexOf("/")+1),i=t.substring(t.lastIndexOf("@")+1,t.lastIndexOf("/"));steem.api.getContent(i,r,function(t,a){if(!t&&a&&a.id>0){var n=new Date(a.created+"Z"),r=a.active_votes.filter(function(t){return t.voter==e.name}),i=r.length>0&&new Date-new Date(r[0].time+"Z")>12e5;i?o("This bot has already voted on this post!"):new Date-n>=24*e.max_post_age*60*60*1e3?o("This post is past the max age accepted by this bot!"):o(null)}else o("There was an error loading this post, please check the URL.")})}(x.bot,o,a,n,function(e){e?($("#bid_details_error").html("<b>Error:</b> "+e),$("#bid_details_error").show(),r.close()):x.modal("hide")})}function m(){var e=$("#bid_details_account_name").val(),t=$("#bid_details_recent_posts"),a=(new Date).getTime()-24*(x.bot.max_post_age?x.bot.max_post_age:6)*60*60*1e3;steem.api.getDiscussionsByAuthorBeforeDate(e,null,(new Date).toISOString().split(".")[0],5,function(e,n){var o=n.filter(function(e){return new Date(e.created).getTime()>a});o.length>0?t.empty():t.html("None Found"),o.forEach(function(e){var a=e.title.length>25?e.title.substring(0,22)+"...":e.title,n=$('<button type="button" class="btn btn-info btn-xs" style="margin: 0 5px;">'+a+"</button>");t.append(n),n.click(function(){$("#bid_details_post_url").val("https://steemit.com"+e.url)})})})}var u=1,p=.75,_=20,f="USD",g=[],h=[],v=18e5,b="https://steembottracker.net",E={},w=null,x=null,y={},S=[],M=[];!function(){try{Notification&&"granted"!==Notification.permission&&Notification.requestPermission()}catch(e){}e(),setInterval(e,3e4),t(),setInterval(t,6e5),a(),setInterval(a,3e4),updateSteemVariables(n),setInterval(n,6e5),setInterval(updateTimers,1e3),function(){function e(e){E[e]=!E[e],$("#filter_"+e).css("border",E[e]?"2px solid green":"none"),o()}$("#curation_option").on("change",function(){p=this.checked?.75:1,o()}),localStorage.hasOwnProperty("favorites")&&(S=localStorage.getItem("favorites").split(",")),localStorage.hasOwnProperty("hidden")&&(M=localStorage.getItem("hidden").split(",")),$("#unhide_link a").click(function(){M=[],localStorage.setItem("hidden",""),o(),$("#unhide_link").hide()}),localStorage.hasOwnProperty("currency_list")?($("#currency_list").val(localStorage.getItem("currency_list")),f=localStorage.getItem("currency_list")):localStorage.setItem("currency_list","USD"),$("#currency_list").change(function(){f=$("#currency_list").val(),localStorage.setItem("currency_list",f),o()}),$("#min_vote_slider").slider(),$("#bid_details_account_name").on("change",function(e){localStorage.setItem("bid_details_account_name",$("#bid_details_account_name").val()),m()}),localStorage.hasOwnProperty("min_vote_slider")?($("#min_vote_slider").slider("setValue",localStorage.getItem("min_vote_slider")),_=parseFloat(localStorage.getItem("min_vote_slider"))):localStorage.setItem("min_vote_slider",_),$("#min_vote_slider").on("slide",function(e){e.value!=_&&(_=parseFloat(e.value),localStorage.setItem("min_vote_slider",e.value),o())}),$("#calculate_vote").click(function(){var e=null,t=$("#bot_list").val();g.forEach(function(a){a.name!=t||(e=a)});var a=$("#calc_currency").val(),n=parseFloat($("#bid_amount").val()),o="SBD"==a?n*sbd_price:n*steem_price,r=o/(o+e.total_usd)*e.vote_usd,i=o/(o+e.total_usd)*e.vote/2,s=o/(o+e.total_usd)*e.vote/2/steem_price;return $("#bid_value").text("$"+o.formatMoney()),$("#vote_value").text("$"+r.formatMoney()+" = "+i.formatMoney()+" SBD + "+s.formatMoney()+" STEEM"),$("#vote_value_net").text("$"+(.75*r).formatMoney()+" = "+(.75*i).formatMoney()+" SBD + "+(.75*s).formatMoney()+" STEEM"),$("#vote_value").css("color",r>=o?"#008800":"#FF0000"),$("#vote_value_net").css("color",.75*r>=o?"#008800":"#FF0000"),!1}),$("#close_peg_msg").click(function(){$("#peg_msg").hide(),localStorage.setItem("hide_peg_msg",!0)}),localStorage.hasOwnProperty("hide_peg_msg")&&$("#peg_msg").hide(),localStorage.hasOwnProperty("accept_disclaimer")||setTimeout(function(){$("#disclaimer").modal(),localStorage.setItem("accept_disclaimer",!0)},2e3),$("#filter_verified").click(function(){e("verified")}),$("#filter_refund").click(function(){e("refund")}),$("#filter_steem").click(function(){e("steem")}),$("#filter_funding").click(function(){e("funding")}),$("#filter_nocomment").click(function(){e("nocomment")}),$("#minnowbooster-submit").click(function(){c({name:"minnowbooster",min_bid:.01,max_post_age:6.3})}),$("#randowhale-submit").click(function(){c({name:"randowhale",min_bid:1,max_post_age:3.5})}),$("#smartsteem-submit").click(function(){c({name:"smartmarket",min_bid:.1,max_post_age:6.3})});var t=getURLParameter("access_token")?getURLParameter("access_token"):localStorage.getItem("access_token");sc2.init({baseURL:"https://v2.steemconnect.com",app:"bottracker.app",accessToken:t,callbackURL:"https://steembottracker.com",scope:["login","vote"]}),sc2.me(function(e,a){a&&!e?(console.log(a),w=a.account,$("#btn_login").hide(),$("#user_info").show(),$("#login_info").text("@"+w.name),localStorage.setItem("access_token",t)):($("#btn_login").show(),$("#user_info").hide())}),$("#btn_logout").click(function(){localStorage.removeItem("access_token"),window.location.href=window.location.pathname}),$("#btn_bid_history").click(function(){$("#user_bids").modal(),steem.api.getAccountHistory(w.name,-1,1e3,function(e,t){for(var a=[],n=0,o=0;o<t.length;o++){var r=t[o],i=r[1].op,s=i[1];if("transfer"==i[0]&&h.indexOf(s.to)>=0){if(!checkMemo(s.memo))continue;a.push(s),function(e,t){var a=e.memo.substr(e.memo.lastIndexOf("/")+1),n=e.memo.substring(e.memo.lastIndexOf("@")+1,e.memo.lastIndexOf("/"));steem.api.getContent(n,a,function(a,n){if(!a&&n&&n.id>0){var o=n.active_votes.find(function(t){return t.voter==e.to});o&&(e.vote_rshares=o.rshares,e.vote_percent=o.percent),e.title=n.title}else console.log(a);t&&t()})}(s,function(){++n>=a.length&&(console.log(a),function(e){var t=$("#user_bids_table tbody");t.empty(),$("#user_bids_name").text(w.name),e.reverse(),e.forEach(function(e){if(e.title){var a=parseFloat(e.amount),n=getUsdValue(e),o=getCurrency(e.amount),r=$(document.createElement("tr")),i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href",e.memo),s.attr("target","_blank"),s.text(e.title.length>30?e.title.substr(0,30)+"...":e.title),i.append(s),r.append(i);var i=$(document.createElement("td")),s=$(document.createElement("a"));s.attr("href","https://steemit.com/@"+e.to),s.attr("target","_blank"),s.text("@"+e.to),i.append(s),r.append(i);var i=$(document.createElement("td"));i.text(a.formatMoney()+" "+o+(e.refunded?" (refunded)":"")),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text("$"+n.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":(e.vote_percent/100).formatMoney()+"%"),i.css("text-align","right"),r.append(i);var l=e.vote_rshares*rewardBalance/recentClaims*steemPrice,i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":"$"+l.formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":"$"+(l/2*sbd_price+l/2).formatMoney()),i.css("text-align","right"),r.append(i);var i=$(document.createElement("td"));i.text(e.refunded||!e.vote_rshares?"--":(100*((l/2*sbd_price+l/2)/n-1)).formatMoney()+"%"),i.css("text-align","right"),r.append(i),t.append(r)}})}(a))})}else if("transfer"==i[0]&&h.indexOf(i[1].from)>=0){var s=a.find(function(e){return e.to==i[1].from&&e.amount==i[1].amount});s&&(s.refunded=!0)}}})}),$("#btn_front_run").click(function(){$.get(b+"/posts",function(e){var t=e,a=0;t.forEach(function(e){var n=e.permlink,o=e.author;steem.api.getContent(o,n,function(n,o){if(!n&&o&&o.id>0){e.created=new Date(o.created+"Z"),e.payout=parseFloat(o.pending_payout_value),e.title=o.title,e.author=o.author,e.permlink=o.permlink;var r=Math.min(new Date-new Date(o.created+"Z"),v)/v;e.curation_reward=(Math.sqrt(.25*(e.payout+1))-Math.sqrt(.25*e.payout))*Math.sqrt(.25*(e.payout+1+e.vote_value))*r,w&&(e.voted=null!=o.active_votes.find(function(e){return e.voter==w.name}))}++a>=t.length&&(t.sort(function(e,t){return parseFloat(t.curation_reward)-parseFloat(e.curation_reward)}),function(e){var t=$("#front_runner_table tbody");t.empty(),e.forEach(function(e){if(e.title){var a=$(document.createElement("tr")),n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com/@"+e.author),o.attr("target","_blank"),o.text("@"+e.author),n.append(o),a.append(n);var n=$(document.createElement("td")),o=$(document.createElement("a"));o.attr("href","https://steemit.com"+e.url),o.attr("target","_blank"),o.text(e.title.length>40?e.title.substr(0,40)+"...":e.title),n.append(o),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.payout.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+parseFloat(e.amount).formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));n.text("$"+e.vote_value.formatMoney()),n.css("text-align","right"),a.append(n);var n=$(document.createElement("td"));if(n.text("$"+e.curation_reward.formatMoney()+" / $1"),n.css("text-align","right"),a.append(n),n=$(document.createElement("td")),e.voted)n.text("Voted");else{var o=$('<button type="button" class="btn btn-info btn-xs"><i class="fa fa-thumbs-up mr5"></i>Upvote</button>');o.click(function(t){w?(n.empty(),n.text("Voting..."),sc2.vote(w.name,e.author,e.permlink,1e4,function(e,t){console.log(e,t),t&&!e?n.text("Success!"):(n.empty(),n.append(o))})):window.location.href=sc2.getLoginURL()}),n.append(o)}n.css("text-align","center"),a.append(n),t.append(a)}})}(t))})})}),$("#front_runner_dialog").modal()})}()}()});